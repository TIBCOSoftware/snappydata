<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project documentation for SnappyData"><meta name=author content="SnappyData Team"><link href=https://tibcosoftware.github.io/snappydata/1.3.0/best_practices/design_schema/optimizing_query_latency/ rel=canonical><link rel=icon href=../../../favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.0.3"><title>Optimizing Query Latency: Partitioning and Replication Strategies - SnappyData™ 1.3.0</title><link rel=stylesheet href=../../../assets/stylesheets/main.62128196.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.9204c3b2.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7CFira+Mono&display=fallback"><style>:root{--md-text-font:"Lato";--md-code-font:"Fira Mono"}</style><link rel=stylesheet href=../../../extra.css><script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../../..":"../../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#optimizing-query-latency-partitioning-and-replication-strategies class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="SnappyData™ 1.3.0" class="md-header__button md-logo" aria-label="SnappyData™ 1.3.0" data-md-component=logo> <img src=../../../Images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> SnappyData™ 1.3.0 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Optimizing Query Latency: Partitioning and Replication Strategies </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/TIBCOSoftware/snappydata/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="SnappyData™ 1.3.0" class="md-nav__button md-logo" aria-label="SnappyData™ 1.3.0" data-md-component=logo> <img src=../../../Images/logo.png alt=logo> </a> SnappyData™ 1.3.0 </label> <div class=md-nav__source> <a href=https://github.com/TIBCOSoftware/snappydata/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../release_notes/release_notes/ class=md-nav__link> Release Notes </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../install/ >Provisioning SnappyData</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Provisioning SnappyData" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Provisioning SnappyData </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../install/system_requirements/ class=md-nav__link> System Requirements </a> </li> <li class=md-nav__item> <a href=../../../install/install_on_premise/ class=md-nav__link> Installing SnappyData On-Premise </a> </li> <li class=md-nav__item> <a href=../../../install/setting_up_cluster_on_amazon_web_services/ class=md-nav__link> Setting-up SnappyData Cluster on AWS </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/ class=md-nav__link> Setting-up SnappyData Cluster on Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../quickstart/getting_started_with_docker_image/ class=md-nav__link> Building a Docker Image with SnappyData Binaries </a> </li> <li class=md-nav__item> <a href=../../../install/building_from_source/ class=md-nav__link> Building SnappyData from Source files </a> </li> <li class=md-nav__item> <a href=../../../install/upgrade/ class=md-nav__link> Upgrading SnappyData </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../quickstart/ >Getting Started</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/getting_started_by_installing_snappydata_on-premise/ class=md-nav__link> On-Premise </a> </li> <li class=md-nav__item> <a href=../../../quickstart/getting_started_on_kubernetes/ class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../quickstart/getting_started_with_your_spark_distribution/ class=md-nav__link> Spark Distribution </a> </li> <li class=md-nav__item> <a href=../../../howto/use_apache_zeppelin_with_snappydata/ class=md-nav__link> Using Apache Zeppelin with SnappyData </a> </li> <li class=md-nav__item> <a href=../../../quickstart/snappydataquick_start/ class=md-nav__link> SnappyData Quickstart Guide </a> </li> <li class=md-nav__item> <a href=../../../quickstart/using_spark_scala_apis/ class=md-nav__link> Using Spark Scala APIs </a> </li> <li class=md-nav__item> <a href=../../../quickstart/performance_apache_spark/ class=md-nav__link> Benchmark 16-20x Faster Performance than Apache Spark </a> </li> <li class=md-nav__item> <a href=../../../quickstart/using_sql/ class=md-nav__link> Using SQL </a> </li> <li class=md-nav__item> <a href=../../../quickstart/structucture_streamingquickstart/ class=md-nav__link> Structured Streaming </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../configuring_cluster/configure_launch_cluster/ class=md-nav__link> Configure/Launch SnappyData Cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../architecture/ >Concepts</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Concepts data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../architecture/core_components/ class=md-nav__link> Core Components </a> </li> <li class=md-nav__item> <a href=../../../architecture/cluster_architecture/ class=md-nav__link> SnappyData Cluster Architecture </a> </li> <li class=md-nav__item> <a href=../../../architecture/hybrid_cluster_manager/ class=md-nav__link> Hybrid Cluster Manager </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_5 type=checkbox id=__nav_6_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../consistency/ >Distributed Transactions</a> <label for=__nav_6_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Distributed Transactions" data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Distributed Transactions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../consistency/using_transactions_row/ class=md-nav__link> How Transactions Work for Row Tables </a> </li> <li class=md-nav__item> <a href=../../../consistency/using_snapshot_isolation_column/ class=md-nav__link> Lock-free Queries using MVCC and Snapshot Isolation for Column Tables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_6 type=checkbox id=__nav_6_6> <div class="md-nav__link md-nav__link--index "> <a href=../../../affinity_modes/ >Affinity Modes</a> <label for=__nav_6_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Affinity Modes" data-md-level=2> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Affinity Modes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../affinity_modes/local_mode/ class=md-nav__link> Local Mode </a> </li> <li class=md-nav__item> <a href=../../../affinity_modes/embedded_mode/ class=md-nav__link> Embedded SnappyData Store Mode </a> </li> <li class=md-nav__item> <a href=../../../affinity_modes/connector_mode/ class=md-nav__link> SnappyData Smart Connector Mode </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../howto/ >How Tos</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="How Tos" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> How Tos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../howto/start_snappy_cluster/ class=md-nav__link> How to Start a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../../../howto/check_status_cluster/ class=md-nav__link> How to Check the Status of a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../../../howto/stop_snappy_cluster/ class=md-nav__link> How to Stop a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../../../howto/run_spark_job_inside_cluster/ class=md-nav__link> How to Run Spark Job inside the Cluster </a> </li> <li class=md-nav__item> <a href=../../../howto/spark_installation_using_smart_connector/ class=md-nav__link> How to Access SnappyData Store from existing Spark Installation using Smart Connector </a> </li> <li class=md-nav__item> <a href=../../../howto/use_snappy_shell/ class=md-nav__link> How to Use Snappy SQL shell (snappy-sql) </a> </li> <li class=md-nav__item> <a href=../../../howto/create_row_tables_and_run_queries/ class=md-nav__link> How to Create Row Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../../../howto/create_column_tables_and_run_queries/ class=md-nav__link> How to Create Column Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../../../howto/load_data_into_snappydata_tables/ class=md-nav__link> How to Load Data into SnappyData Tables </a> </li> <li class=md-nav__item> <a href=../../../howto/load_data_from_external_data_stores/ class=md-nav__link> How to Load Data from External Data Stores (e.g. HDFS, Cassandra, Hive, etc) </a> </li> <li class=md-nav__item> <a href=../../../howto/perform_a_colocated_join/ class=md-nav__link> How to Perform a Colocated Join </a> </li> <li class=md-nav__item> <a href=../../../howto/connect_using_jdbc_driver/ class=md-nav__link> How to Connect using JDBC Driver </a> </li> <li class=md-nav__item> <a href=../../../howto/using_snappydata_for_any_spark_dist/ class=md-nav__link> How to use SnappyData for any Spark Distribution </a> </li> <li class=md-nav__item> <a href=../../../howto/store_retrieve_complex_datatypes_JDBC/ class=md-nav__link> How to Store and Retrieve Complex Data Types in JDBC Programs </a> </li> <li class=md-nav__item> <a href=../../../howto/store_and_query_objects/ class=md-nav__link> How to Store and Query Objects </a> </li> <li class=md-nav__item> <a href=../../../howto/use_stream_processing_with_snappydata/ class=md-nav__link> How to use Stream Processing with SnappyData </a> </li> <li class=md-nav__item> <a href=../../../howto/use_transactions_isolation_levels/ class=md-nav__link> How to use Transactions Isolation Levels </a> </li> <li class=md-nav__item> <a href=../../../howto/use_synopsis_data_engine_to_run_approximate_queries/ class=md-nav__link> How to use Approximate Query Processing (AQP) to Run Approximate Queries </a> </li> <li class=md-nav__item> <a href=../../../howto/use_python_to_create_tables_and_run_queries/ class=md-nav__link> How to use Python to Create Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../../../howto/connect_using_odbc_driver/ class=md-nav__link> How to Connect using ODBC Driver </a> </li> <li class=md-nav__item> <a href=../../../howto/connect_to_the_cluster_from_external_clients/ class=md-nav__link> How to Connect to the Cluster from External Network </a> </li> <li class=md-nav__item> <a href=../../../howto/import_from_hive_table/ class=md-nav__link> How to Import Data from Hive Table into SnappyData Table </a> </li> <li class=md-nav__item> <a href=../../../howto/export_hdfs/ class=md-nav__link> How to Export and Restore Table Data using HDFS </a> </li> <li class=md-nav__item> <a href=../../../howto/connect_oss_vis_client_tools/ class=md-nav__link> How to Access SnappyData from Various SQL Client Tools </a> </li> <li class=md-nav__item> <a href=../../../howto/connecttibcospotfire/ class=md-nav__link> How to connect TIBCO Spotfire® Desktop to SnappyData </a> </li> <li class=md-nav__item> <a href=../../../howto/tableauconnect/ class=md-nav__link> How to Connect Tableau to SnappyData </a> </li> <li class=md-nav__item> <a href=../../../howto/use_apache_zeppelin_with_snappydata/ class=md-nav__link> How to Use Apache Zeppelin with SnappyData </a> </li> <li class=md-nav__item> <a href=../../../howto/concurrent_apache_zeppelin_access_to_secure_snappydata/ class=md-nav__link> How to Configure Apache Zeppelin to Securely and Concurrently access the SnappyData Cluster </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../programming_guide/ >Programming Guide</a> <label for=__nav_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Programming Guide" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Programming Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../programming_guide/sparksession_snappysession_and_snappystreamingcontext/ class=md-nav__link> SparkSession, SnappySession and SnappyStreamingContext </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/snappydata_jobs/ class=md-nav__link> Snappy Jobs </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/managing_jar_files/ class=md-nav__link> Managing JAR Files </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/using_snappydata_shell/ class=md-nav__link> Using Snappy Shell </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/using_the_spark_shell_and_spark-submit/ class=md-nav__link> Using the Spark Shell and spark-submit </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/using_pyspark_shell/ class=md-nav__link> Using pyspark Shell </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/scala_interpreter/ class=md-nav__link> Executing Spark Scala Code using SQL </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/working_with_hadoop_yarn_cluster_manager/ class=md-nav__link> Working with Hadoop YARN cluster Manager </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/using_jdbc_with_snappydata/ class=md-nav__link> Using JDBC with SnappyData </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/spark_jdbc_connector/ class=md-nav__link> Accessing SnappyData Tables from any Spark (2.1+) Cluster </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/multiple_language_binding_using_thrift_protocol/ class=md-nav__link> Multiple Language Binding using Thrift Protocol </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/building_snappydata_applications_using_spark_api/ class=md-nav__link> Building SnappyData Applications using Spark API </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/tables_in_snappydata/ class=md-nav__link> Tables in SnappyData </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/stream_processing_using_sql/ class=md-nav__link> Stream Processing using SQL </a> </li> <li class=md-nav__item> <a href=../../../programming_guide/udf_and_udaf/ class=md-nav__link> User Defined Functions (UDF) and User Defined Aggregate Functions (UDAF) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Best Practices</a> <label for=__nav_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Best Practices" data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../setup_cluster/ class=md-nav__link> Tuning for Concurrency and Computation </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9_3 type=checkbox id=__nav_9_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Designing your Database and Schema</a> <label for=__nav_9_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Designing your Database and Schema" data-md-level=2> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> Designing your Database and Schema </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../design_principles/ class=md-nav__link> Design Principles of Scalable, Partition-Aware Databases </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Optimizing Query Latency: Partitioning and Replication Strategies <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Optimizing Query Latency: Partitioning and Replication Strategies </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-column-versus-row-table class=md-nav__link> Using Column versus Row Table </a> <nav class=md-nav aria-label="Using Column versus Row Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-column-tables class=md-nav__link> Using Column Tables </a> </li> <li class=md-nav__item> <a href=#using-row-tables class=md-nav__link> Using Row Tables </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-partitioned-versus-replicated-row-table class=md-nav__link> Using Partitioned versus Replicated Row Table </a> </li> <li class=md-nav__item> <a href=#applying-partitioning-scheme class=md-nav__link> Applying Partitioning Scheme </a> <nav class=md-nav aria-label="Applying Partitioning Scheme"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#colocated-joins class=md-nav__link> Colocated Joins </a> </li> <li class=md-nav__item> <a href=#buckets class=md-nav__link> Buckets </a> </li> <li class=md-nav__item> <a href=#criteria-for-column-partitioning class=md-nav__link> Criteria for Column Partitioning </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-redundancy class=md-nav__link> Using Redundancy </a> </li> <li class=md-nav__item> <a href=#overflow-configuration class=md-nav__link> Overflow Configuration </a> </li> <li class=md-nav__item> <a href=#known-limitation class=md-nav__link> Known Limitation </a> <nav class=md-nav aria-label="Known Limitation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#change-not-in-queries-to-use-not-exists-if-possible class=md-nav__link> Change NOT IN queries to use NOT EXISTS if possible </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../memory_management/ class=md-nav__link> Memory Management </a> </li> <li class=md-nav__item> <a href=../../ha_considerations/ class=md-nav__link> HA Considerations </a> </li> <li class=md-nav__item> <a href=../../structured_streaming_best_practices/ class=md-nav__link> Structured Streaming </a> </li> <li class=md-nav__item> <a href=../../important_settings/ class=md-nav__link> Important Settings </a> </li> <li class=md-nav__item> <a href=../../transactions_best_practices/ class=md-nav__link> SnappyData Distributed Transactions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <div class="md-nav__link md-nav__link--index "> <a href=../../../sde/ >Approximate Query Processing</a> <label for=__nav_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Approximate Query Processing" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Approximate Query Processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../sde/key_concepts/ class=md-nav__link> Key Concepts </a> </li> <li class=md-nav__item> <a href=../../../sde/working_with_stratified_samples/ class=md-nav__link> Working with Stratified Samples </a> </li> <li class=md-nav__item> <a href=../../../sde/running_queries/ class=md-nav__link> Running Queries </a> </li> <li class=md-nav__item> <a href=../../../sde/more_examples/ class=md-nav__link> More Examples </a> </li> <li class=md-nav__item> <a href=../../../sde/sample_selection/ class=md-nav__link> Sample Selection </a> </li> <li class=md-nav__item> <a href=../../../sde/hac_contracts/ class=md-nav__link> High-level Accuracy Contracts (HAC) </a> </li> <li class=md-nav__item> <a href=../../../sde/sketching/ class=md-nav__link> Sketching </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <div class="md-nav__link md-nav__link--index "> <a href=../../../connectors/ >Working with Data Sources</a> <label for=__nav_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Working with Data Sources" data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Working with Data Sources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data/data_formats/ class=md-nav__link> Supported Data Formats </a> </li> <li class=md-nav__item> <a href=../../../connectors/access_cloud_data/ class=md-nav__link> Accessing Cloud Storages </a> </li> <li class=md-nav__item> <a href=../../../data/external_hive_support/ class=md-nav__link> Connecting to External Hive Metastores </a> </li> <li class=md-nav__item> <a href=../../../connectors/cdc_connector/ class=md-nav__link> Using the SnappyData CDC (Change Data Capture) Connector </a> </li> <li class=md-nav__item> <a href=../../../connectors/jdbc_streaming_connector/ class=md-nav__link> Using the SnappyData JDBC Streaming Connector </a> </li> <li class=md-nav__item> <a href=../../../connectors/tdv/ class=md-nav__link> Connecting to TIBCO Data Virtualization (TDV) </a> </li> <li class=md-nav__item> <a href=../../../connectors/deployment_dependency_jar/ class=md-nav__link> Deploying Third Party Connectors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_12 type=checkbox id=__nav_12> <div class="md-nav__link md-nav__link--index "> <a href=../../../monitoring/ >Managing and Monitoring</a> <label for=__nav_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Managing and Monitoring" data-md-level=1> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Managing and Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../monitoring/monitoring/ class=md-nav__link> SnappyData Monitoring UI </a> </li> <li class=md-nav__item> <a href=../../../monitoring/configure_high_availability/ class=md-nav__link> Configuring High Availability for a Partitioned Table </a> </li> <li class=md-nav__item> <a href=../../../monitoring/configure_logging/ class=md-nav__link> Configuring Logging </a> </li> <li class=md-nav__item> <a href=../../../monitoring/metrics/ class=md-nav__link> Monitoring with Metrics </a> </li> <li class=md-nav__item> <a href=../../../monitoring/monitor-manage/ class=md-nav__link> Getting Information from SnappyData System Tables </a> </li> <li class=md-nav__item> <a href=../../../monitoring/recoveringdata/ class=md-nav__link> Recovering Data During Cluster Failures </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_13 type=checkbox id=__nav_13> <div class="md-nav__link md-nav__link--index "> <a href=../../../security/ >Managing Security</a> <label for=__nav_13> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Managing Security" data-md-level=1> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Managing Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../security/launching_the_cluster_in_secure_mode/ class=md-nav__link> Launching the Cluster in Secure Mode </a> </li> <li class=md-nav__item> <a href=../../../security/specify_encrypt_passwords_conf_client/ class=md-nav__link> Specifying Encrypted Passwords in Conf Files or in Client Connections </a> </li> <li class=md-nav__item> <a href=../../../security/authentication_connecting_to_a_secure_cluster/ class=md-nav__link> Authentication - Connecting to a Secure Cluster </a> </li> <li class=md-nav__item> <a href=../../../security/authorization/ class=md-nav__link> Authorization </a> </li> <li class=md-nav__item> <a href=../../../security/row_level_security/ class=md-nav__link> Implementing Row Level Security </a> </li> <li class=md-nav__item> <a href=../../../security/configuring_network_encryption_and_authentication_using_ssl/ class=md-nav__link> Configuring Network Encryption and Authentication using SSL </a> </li> <li class=md-nav__item> <a href=../../../configuring_cluster/ssl_setup/ class=md-nav__link> Enabling SSL Encryption in Different Socket Endpoints of SnappyData </a> </li> <li class=md-nav__item> <a href=../../../configuring_cluster/securinguiconnection/ class=md-nav__link> Securing SnappyData UI Connection </a> </li> <li class=md-nav__item> <a href=../../../security/user_names_for_authentication_authorization_and_membership/ class=md-nav__link> User Names for Authentication, Authorization, and Membership </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_14 type=checkbox id=__nav_14> <div class="md-nav__link md-nav__link--index "> <a href=../../../statistics/ >Evaluating Statistics for the System and Applications</a> <label for=__nav_14> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Evaluating Statistics for the System and Applications" data-md-level=1> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Evaluating Statistics for the System and Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../statistics/collecting_system_stats/ class=md-nav__link> Collecting System Statistics </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_14_3 type=checkbox id=__nav_14_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../statistics/vsd/ >Using VSD to Analyze Statistics</a> <label for=__nav_14_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Using VSD to Analyze Statistics" data-md-level=2> <label class=md-nav__title for=__nav_14_3> <span class="md-nav__icon md-icon"></span> Using VSD to Analyze Statistics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../statistics/vsd/running_vsd/ class=md-nav__link> Installing and Running VSD </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd_transactions/ class=md-nav__link> Transaction Performance </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd_tables/ class=md-nav__link> Table Performance </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd_statements/ class=md-nav__link> SQL Statement Performance </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd_memory/ class=md-nav__link> Memory Usage </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd-connection-stats/ class=md-nav__link> Client Connections </a> </li> <li class=md-nav__item> <a href=../../../statistics/vsd/vsd_cpu/ class=md-nav__link> CPU Usage </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15 type=checkbox id=__nav_15> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/ >Reference Guides</a> <label for=__nav_15> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Reference Guides" data-md-level=1> <label class=md-nav__title for=__nav_15> <span class="md-nav__icon md-icon"></span> Reference Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../configuring_cluster/configuring_cluster/ class=md-nav__link> Configuration Reference </a> </li> <li class=md-nav__item> <a href=../../../configuring_cluster/property_description/ class=md-nav__link> List of Properties </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4 type=checkbox id=__nav_15_4> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/sql_reference/ >SQL Reference Guide</a> <label for=__nav_15_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="SQL Reference Guide" data-md-level=2> <label class=md-nav__title for=__nav_15_4> <span class="md-nav__icon md-icon"></span> SQL Reference Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/sql_reference/alter-table/ class=md-nav__link> ALTER TABLE </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_3 type=checkbox id=__nav_15_4_3> <label class=md-nav__link for=__nav_15_4_3> CREATE Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CREATE Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_3> <span class="md-nav__icon md-icon"></span> CREATE Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-diskstore/ class=md-nav__link> CREATE DISKSTORE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-external-table/ class=md-nav__link> CREATE EXTERNAL TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-function/ class=md-nav__link> CREATE FUNCTION </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-index/ class=md-nav__link> CREATE INDEX </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-schema/ class=md-nav__link> CREATE SCHEMA </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-stream-table/ class=md-nav__link> CREATE STREAM TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-sample-table/ class=md-nav__link> CREATE SAMPLE TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-table/ class=md-nav__link> CREATE TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-temporary-table/ class=md-nav__link> CREATE TEMPORARY TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/create-view/ class=md-nav__link> CREATE VIEW </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/delete/ class=md-nav__link> DELETE </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_5 type=checkbox id=__nav_15_4_5> <label class=md-nav__link for=__nav_15_4_5> DROP Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DROP Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_5> <span class="md-nav__icon md-icon"></span> DROP Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/sql_reference/drop-diskstore/ class=md-nav__link> DROP DISKSTORE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/drop-function/ class=md-nav__link> DROP FUNCTION </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/drop-index/ class=md-nav__link> DROP INDEX </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/drop-table/ class=md-nav__link> DROP TABLE/EXTERNAL TABLE/SAMPLE TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/drop-schema/ class=md-nav__link> DROP SCHEMA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_6 type=checkbox id=__nav_15_4_6> <label class=md-nav__link for=__nav_15_4_6> DEPLOY Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DEPLOY Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_6> <span class="md-nav__icon md-icon"></span> DEPLOY Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/sql_reference/deploy_package/ class=md-nav__link> DEPLOY PACKAGE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/deploy_jar/ class=md-nav__link> DEPLOY JAR </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/undeploy/ class=md-nav__link> UNDEPLOY </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/exec-scala/ class=md-nav__link> exec scala </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/explain/ class=md-nav__link> EXPLAIN </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/grant/ class=md-nav__link> GRANT </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/grant-all/ class=md-nav__link> GRANT ALL </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/insert/ class=md-nav__link> INSERT </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/lateral-view/ class=md-nav__link> LATERAL VIEW </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/list/ class=md-nav__link> LIST </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/pivot/ class=md-nav__link> PIVOT </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/put-into/ class=md-nav__link> PUT INTO </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/revoke/ class=md-nav__link> REVOKE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/revoke_all/ class=md-nav__link> REVOKE ALL </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/select/ class=md-nav__link> SELECT </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/set-isolation/ class=md-nav__link> SET ISOLATION </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/set-schema/ class=md-nav__link> SET SCHEMA </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/truncate-table/ class=md-nav__link> TRUNCATE TABLE </a> </li> <li class=md-nav__item> <a href=../../../reference/sql_reference/update/ class=md-nav__link> UPDATE </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_5 type=checkbox id=__nav_15_5> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/sql_functions/ >SQL Functions</a> </div> <nav class=md-nav aria-label="SQL Functions" data-md-level=2> <label class=md-nav__title for=__nav_15_5> <span class="md-nav__icon md-icon"></span> SQL Functions </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/sql_general_limitations/ class=md-nav__link> SQL General Limitations </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_7 type=checkbox id=__nav_15_7> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/inbuilt_system_procedures/ >Built-in System Procedures and Built-in Functions</a> <label for=__nav_15_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Built-in System Procedures and Built-in Functions" data-md-level=2> <label class=md-nav__title for=__nav_15_7> <span class="md-nav__icon md-icon"></span> Built-in System Procedures and Built-in Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/dump-stacks/ class=md-nav__link> DUMP_STACKS </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/rebalance-all-buckets/ class=md-nav__link> REBALANCE_ALL_BUCKETS </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/set_critical_heap_percentage/ class=md-nav__link> SET_CRITICAL_HEAP_PERCENTAGE </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/set-trace-flag/ class=md-nav__link> SET_TRACE_FLAG </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/sys_remove_metastore_entry/ class=md-nav__link> REMOVE_METASTORE_ENTRY </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/export_ddl/ class=md-nav__link> EXPORT_DDLS </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/export_data/ class=md-nav__link> EXPORT_DATA </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/dsid/ class=md-nav__link> DSID </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/current_user/ class=md-nav__link> CURRENT_USER </a> </li> <li class=md-nav__item> <a href=../../../reference/inbuilt_system_procedures/current_user_ldap_groups/ class=md-nav__link> CURRENT_USER_LDAP_GROUPS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_8 type=checkbox id=__nav_15_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/system_tables/ >System Tables</a> <label for=__nav_15_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="System Tables" data-md-level=2> <label class=md-nav__title for=__nav_15_8> <span class="md-nav__icon md-icon"></span> System Tables </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/system_tables/members/ class=md-nav__link> MEMBERS </a> </li> <li class=md-nav__item> <a href=../../../reference/system_tables/sysdiskstores/ class=md-nav__link> SYSDISKSTORES </a> </li> <li class=md-nav__item> <a href=../../../reference/system_tables/sysdiskstoreids/ class=md-nav__link> SYSDISKSTOREIDS </a> </li> <li class=md-nav__item> <a href=../../../reference/system_tables/systables/ class=md-nav__link> SYSTABLES </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_9 type=checkbox id=__nav_15_9> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/command_line_utilities/ >Command Line Utilities</a> <label for=__nav_15_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Command Line Utilities" data-md-level=2> <label class=md-nav__title for=__nav_15_9> <span class="md-nav__icon md-icon"></span> Command Line Utilities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-backup/ class=md-nav__link> backup and restore </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-compact-all-disk-stores/ class=md-nav__link> compact-all-disk-stores </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-compact-disk-store/ class=md-nav__link> compact-disk-store </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/validate_diskstore/ class=md-nav__link> validate-disk-store </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-list-missing-disk-stores/ class=md-nav__link> list-missing-disk-stores </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-revoke-missing-disk-stores/ class=md-nav__link> revoke-missing-disk-store </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-unblock-disk-stores/ class=md-nav__link> unblock-disk-store </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-run/ class=md-nav__link> run </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/scala-cli/ class=md-nav__link> scala CLI </a> </li> <li class=md-nav__item> <a href=../../../reference/command_line_utilities/store-version/ class=md-nav__link> version </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_10 type=checkbox id=__nav_15_10> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/interactive_commands/ >Snappy-SQL Shell Interactive Commands</a> <label for=__nav_15_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Snappy-SQL Shell Interactive Commands" data-md-level=2> <label class=md-nav__title for=__nav_15_10> <span class="md-nav__icon md-icon"></span> Snappy-SQL Shell Interactive Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/interactive_commands/autocommit/ class=md-nav__link> autocommit </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/commit/ class=md-nav__link> commit </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/connect_client/ class=md-nav__link> connect client </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/connect/ class=md-nav__link> connect </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/describe/ class=md-nav__link> describe </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/disconnect/ class=md-nav__link> disconnect </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/elapsedtime/ class=md-nav__link> elapsedtime </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/exit/ class=md-nav__link> exit </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/maximumdisplaywidth/ class=md-nav__link> MaximumDisplayWidth </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/rollback/ class=md-nav__link> rollback </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/run/ class=md-nav__link> run </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/set_connection/ class=md-nav__link> set connection </a> </li> <li class=md-nav__item> <a href=../../../reference/interactive_commands/show/ class=md-nav__link> show </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_11 type=checkbox id=__nav_15_11> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/configuration_parameters/ >Configuration Parameters</a> <label for=__nav_15_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Configuration Parameters" data-md-level=2> <label class=md-nav__title for=__nav_15_11> <span class="md-nav__icon md-icon"></span> Configuration Parameters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ack-severe-alert-threshold/ class=md-nav__link> ack-severe-alert-threshold </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ack-wait-threshold/ class=md-nav__link> ack-wait-threshold </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/allow-explicit-commit/ class=md-nav__link> allow-explicit-commit </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/archive-disk-space-limit/ class=md-nav__link> archive-disk-space-limit </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/archive-file-size-limit/ class=md-nav__link> archive-file-size-limit </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/bind-address/ class=md-nav__link> bind-address </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/enable-network-partition-detection/ class=md-nav__link> enable-network-partition-detection </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/enable-stats/ class=md-nav__link> enable-stats </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/enable-time-statistics/ class=md-nav__link> enable-time-statistics </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/enable-timestats/ class=md-nav__link> enable-timestats </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/enforce-unique-host/ class=md-nav__link> enforce-unique-host </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/init-scripts/ class=md-nav__link> init-scripts </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/load-balance/ class=md-nav__link> load-balance </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/locators/ class=md-nav__link> locators </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/log-file/ class=md-nav__link> log-file </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/log-level/ class=md-nav__link> log-level </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/member-timeout/ class=md-nav__link> member-timeout </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/membership-port-range/ class=md-nav__link> membership-port-range </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/password/ class=md-nav__link> password </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/read-timeout/ class=md-nav__link> read-timeout </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/redundancy-zone/ class=md-nav__link> redundancy-zone </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/secondary-locators/ class=md-nav__link> secondary-locators </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/skip-constraint-checks/ class=md-nav__link> skip-constraint-checks </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/skip-locks/ class=md-nav__link> skip-locks </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/socket-buffer-size/ class=md-nav__link> socket-buffer-size </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/socket-lease-time/ class=md-nav__link> socket-lease-time </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappydata.datadictionary.allow-startup-errors/ class=md-nav__link> gemfirexd.datadictionary.allow-startup-errors </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappydata.default-startup-recovery-delay/ class=md-nav__link> gemfirexd.default-startup-recovery-delay </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappy.history/ class=md-nav__link> snappy.history </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappydata.max-lock-wait/ class=md-nav__link> gemfirexd.max-lock-wait </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappydata.query-cancellation-interval/ class=md-nav__link> gemfirexd.query-cancellation-interval </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/snappydata.query-timeout/ class=md-nav__link> gemfirexd.query-timeout </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ssl_enabled/ class=md-nav__link> ssl-enabled </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ssl_protocols/ class=md-nav__link> ssl-protocols </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ssl_ciphers/ class=md-nav__link> ssl-ciphers </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/ssl_require_auth/ class=md-nav__link> ssl-require-authentication </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/start-locator/ class=md-nav__link> start-locator </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/statistic-archive-file/ class=md-nav__link> statistic-archive-file </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/statistic-sample-rate/ class=md-nav__link> statistic-sample-rate </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/statistic-sampling-enabled/ class=md-nav__link> statistic-sampling-enabled </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/sync-commits/ class=md-nav__link> sync-commits </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/sys-disk-dir/ class=md-nav__link> sys-disk-dir </a> </li> <li class=md-nav__item> <a href=../../../reference/configuration_parameters/user/ class=md-nav__link> user </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apidocsintro/ class=md-nav__link> Full API Reference Guides </a> </li> <li class=md-nav__item> <a href=../../../reference/API_Reference/odbc_supported_apis/ class=md-nav__link> ODBC Supported API </a> </li> <li class=md-nav__item> <a href=../../../reference/misc/supported_datatypes/ class=md-nav__link> Supported Data Types </a> </li> <li class=md-nav__item> <a href=../../../reference/misc/passwordless_ssh/ class=md-nav__link> Configuring SSH Login without Password </a> </li> <li class=md-nav__item> <a href=../../../setting_up_odbc_driver/ class=md-nav__link> Setting Up SnappyData ODBC Driver </a> </li> <li class=md-nav__item> <a href=../../../setting_up_jdbc_driver_qlikview/ class=md-nav__link> Setting Up SnappyData JDBC Client and QlikView </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../experimental/ class=md-nav__link> Experimental Features </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_17 type=checkbox id=__nav_17> <div class="md-nav__link md-nav__link--index "> <a href=../../../troubleshooting/ >Troubleshooting Common Problems</a> <label for=__nav_17> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Troubleshooting Common Problems" data-md-level=1> <label class=md-nav__title for=__nav_17> <span class="md-nav__icon md-icon"></span> Troubleshooting Common Problems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../troubleshooting/member_startup_problems/ class=md-nav__link> Member Startup Problems </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/recovering_from_a_conflictingpersistentdataexception/ class=md-nav__link> Recovering from a ConflictingPersistentDataException </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/preventing_disk_full_errors/ class=md-nav__link> Preventing Disk Full Errors </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/recovering_from_disk_full_errors/ class=md-nav__link> Recovering from Disk Full Errors </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/catalog_inconsistency/ class=md-nav__link> Resolving Catalog Inconsistency Issues </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/oom/ class=md-nav__link> Troubleshooting Out-of-Memory (OOM) Error </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/collect_debug_artifacts/ class=md-nav__link> Collecting Logs, Stats and Dumps Using the collect-debug-artifacts Script </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/troubleshooting_error_messages/ class=md-nav__link> Troubleshooting Error Messages </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../unsupported/ class=md-nav__link> Unsupported Third-Party Modules </a> </li> <li class=md-nav__item> <a href=../../../additional_files/open_source_components/ class=md-nav__link> Community Edition Features </a> </li> <li class=md-nav__item> <a href=../../../prev_doc_ver/ class=md-nav__link> Doc Archives </a> </li> <li class=md-nav__item> <a href=../../../techsupport/ class=md-nav__link> Contact and Support </a> </li> <li class=md-nav__item> <a href=../../../LICENSE/ class=md-nav__link> License </a> </li> <li class=md-nav__item> <a href=../../../imp_info/ class=md-nav__link> Important Information </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-column-versus-row-table class=md-nav__link> Using Column versus Row Table </a> <nav class=md-nav aria-label="Using Column versus Row Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-column-tables class=md-nav__link> Using Column Tables </a> </li> <li class=md-nav__item> <a href=#using-row-tables class=md-nav__link> Using Row Tables </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-partitioned-versus-replicated-row-table class=md-nav__link> Using Partitioned versus Replicated Row Table </a> </li> <li class=md-nav__item> <a href=#applying-partitioning-scheme class=md-nav__link> Applying Partitioning Scheme </a> <nav class=md-nav aria-label="Applying Partitioning Scheme"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#colocated-joins class=md-nav__link> Colocated Joins </a> </li> <li class=md-nav__item> <a href=#buckets class=md-nav__link> Buckets </a> </li> <li class=md-nav__item> <a href=#criteria-for-column-partitioning class=md-nav__link> Criteria for Column Partitioning </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-redundancy class=md-nav__link> Using Redundancy </a> </li> <li class=md-nav__item> <a href=#overflow-configuration class=md-nav__link> Overflow Configuration </a> </li> <li class=md-nav__item> <a href=#known-limitation class=md-nav__link> Known Limitation </a> <nav class=md-nav aria-label="Known Limitation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#change-not-in-queries-to-use-not-exists-if-possible class=md-nav__link> Change NOT IN queries to use NOT EXISTS if possible </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/TIBCOSoftware/snappydata/edit/master/docs/best_practices/design_schema/optimizing_query_latency.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=optimizing-query-latency-partitioning-and-replication-strategies>Optimizing Query Latency: Partitioning and Replication Strategies<a class=headerlink href=#optimizing-query-latency-partitioning-and-replication-strategies title="Permanent link">&para;</a></h1> <p>The following topics are covered in this section:</p> <ul> <li> <p><a href=#column-row>Using Column vs Row Table</a></p> </li> <li> <p><a href=#partition-replicate>Using Partitioned vs Replicated Row Table</a></p> </li> <li> <p><a href=#partition-scheme>Applying Partitioning Scheme</a></p> </li> <li> <p><a href=#redundancy>Using Redundancy</a></p> </li> <li> <p><a href=#overflow>Overflow Configuration</a></p> </li> </ul> <p><a id=column-row></a></p> <h2 id=using-column-versus-row-table>Using Column versus Row Table<a class=headerlink href=#using-column-versus-row-table title="Permanent link">&para;</a></h2> <p>A columnar table data is stored in a sequence of columns, whereas, in a row table it stores table records in a sequence of rows.</p> <p><a id=column-table></a></p> <h3 id=using-column-tables>Using Column Tables<a class=headerlink href=#using-column-tables title="Permanent link">&para;</a></h3> <p><strong>Analytical Queries</strong>: A column table has distinct advantages for OLAP queries and therefore large tables involved in such queries are recommended to be created as columnar tables. These tables are rarely mutated (deleted/updated). For a given query on a column table, only the required columns are read (since only the required subset columns are to be scanned), which gives a better scan performance. Thus, aggregation queries execute faster on a column table compared to a row table.</p> <p><strong>Compression of Data</strong>: Another advantage that the column table offers is that it allows highly efficient compression of data which reduces the total storage footprint for large tables.</p> <p>Column tables are not suitable for OLTP scenarios. In this case, row tables are recommended.</p> <p><a id=row-table></a></p> <h3 id=using-row-tables>Using Row Tables<a class=headerlink href=#using-row-tables title="Permanent link">&para;</a></h3> <p><strong>OLTP Queries</strong>: Row tables are designed to return the entire row efficiently and are suited for OLTP scenarios when the tables are required to be mutated frequently (when the table rows need to be updated/deleted based on some conditions). In these cases, row tables offer distinct advantages over the column tables.</p> <p><strong>Point queries</strong>: Row tables are also suitable for point queries (for example, queries that select only a few records based on certain where clause conditions).</p> <p><strong>Small Dimension Tables</strong>: Row tables are also suitable to create small dimension tables as these can be created as replicated tables (table data replicated on all data servers).</p> <p><strong>Create Index</strong>: Row tables also allow the creation of an index on certain columns of the table which improves performance.</p> <p><a id=partition-replicate></a></p> <h2 id=using-partitioned-versus-replicated-row-table>Using Partitioned versus Replicated Row Table<a class=headerlink href=#using-partitioned-versus-replicated-row-table title="Permanent link">&para;</a></h2> <p>In SnappyData, row tables can be either partitioned across all servers or replicated on every server. For row tables, large fact tables should be partitioned whereas, dimension tables can be replicated.</p> <p>The SnappyData architecture encourages you to denormalize “dimension” tables into fact tables when possible, and then replicate remaining dimension tables to all data stores in the distributed system.</p> <p>Most databases follow the <a href=http://en.wikipedia.org/wiki/Star_schema>star schema</a> design pattern where large “fact” tables store key information about the events in a system or a business process. For example, a fact table would store rows for events like product sales or bank transactions. Each fact table generally has foreign key relationships to multiple “dimension” tables, which describe further aspects of each row in the fact table.</p> <p>When designing a database schema for SnappyData, the main goal with a typical star schema database is to partition the entities in fact tables. Slow-changing dimension tables should then be replicated on each data store that hosts a partitioned fact table. In this way, a join between the fact table and any number of its dimension tables can be executed concurrently on each partition, without requiring multiple network hops to other members in the distributed system.</p> <p><a id=partition-scheme></a></p> <h2 id=applying-partitioning-scheme>Applying Partitioning Scheme<a class=headerlink href=#applying-partitioning-scheme title="Permanent link">&para;</a></h2> <p><a id=colocated-joins></a></p> <h3 id=colocated-joins>Colocated Joins<a class=headerlink href=#colocated-joins title="Permanent link">&para;</a></h3> <p>In SQL, a JOIN clause is used to combine data from two or more tables, based on a related column between them. JOINS have traditionally been expensive in distributed systems because the data for the tables involved in the JOIN may reside on different physical nodes and the operation has first to move/shuffle the relevant data to one node and perform the operation. SnappyData offers a way to declaratively "co-locate" tables to prevent or reduce shuffling to execute JOINS. When two tables are partitioned on columns and colocated, it forces partitions having the same values for those columns in both tables to be located on the same SnappyData member. Therefore, in a join query, the join operation is performed on each node's local data. Eliminating data shuffling improves performance significantly. For examples refer to, <a href=../../../howto/perform_a_colocated_join/ >How to colocate tables for doing a colocated join</a>.</p> <p><a id=buckets></a></p> <h3 id=buckets>Buckets<a class=headerlink href=#buckets title="Permanent link">&para;</a></h3> <p>A bucket is the smallest unit of in-memory storage for SnappyData tables. Data in a table is distributed evenly across all the buckets. For more information on BUCKETS, refer to <a href=../../important_settings/#buckets>BUCKETS</a>.</p> <p>The default number of buckets in SnappyData cluster mode is 128. In the local mode, it is cores x 2, subject to a maximum of 64 buckets and a minimum of 8 buckets.</p> <p>The number of buckets has an impact on query performance, storage density, and ability to scale the system as data volumes grow. Before deciding the total number of buckets in a table, you must consider the size of the largest bucket required for a table. The total time taken by a query is roughly equal to the scheduling delay plus the time needed to scan the largest bucket for that query. If too many queries are simultaneously executed in the system, scheduling delay can be higher even if the time to scan the bucket is low. In case of an extremely large bucket, the time to scan the bucket will be large even if the query gets scheduled immediately.</p> <p>The following principles should be considered when you set the total number of buckets for a table: * Ensure that data is evenly distributed among the buckets. * If a query on the table is frequent with low latency requirement and those queries scan all the buckets, then ensure that the total number of the buckets is either greater than or equal to the total number of physical cores in a cluster. * If the query is frequent and the query gets pruned to some particular buckets, that is if the query has partitioning columns in predicate, then the total number of buckets can be low if the concurrency is high.</p> <p>When a new server joins or an existing server leaves the cluster, buckets are moved around to ensure that data is balanced across the nodes where the table is defined.</p> <!---The  [-rebalance](../configuring_cluster/property_description.md#rebalance) option on the startup command-line triggers bucket rebalancing and the new server becomes the primary for some of the buckets (and secondary for some if REDUNDANCY>0 has been specified). </br>---> <p>You can set the system procedure <a href=../../../reference/inbuilt_system_procedures/rebalance-all-buckets/#sysrebalance_all_buckets>call sys.rebalance_all_buckets()</a> to trigger rebalance.</p> <p><a id=dimension></a></p> <h3 id=criteria-for-column-partitioning>Criteria for Column Partitioning<a class=headerlink href=#criteria-for-column-partitioning title="Permanent link">&para;</a></h3> <p>It is recommended to use a relevant dimension for partitioning so that all partitions are active and the query is executed concurrently. If only a single partition is active and is used largely by queries (especially concurrent queries) it means a significant bottleneck where only a single partition is active all the time, while others are idle. This serializes execution into a single thread handling that partition. Therefore, it is not recommended to use DATE/TIMESTAMP as partitioning.</p> <p><a id=redundancy></a></p> <h2 id=using-redundancy>Using Redundancy<a class=headerlink href=#using-redundancy title="Permanent link">&para;</a></h2> <p>REDUNDANCY clause of <a href=../../../reference/sql_reference/create-table/ >CREATE TABLE</a> specifies the number of secondary copies you want to maintain for your partitioned table. This allows the table data to be highly available even if one of the SnappyData members fails or shuts down.</p> <p>A REDUNDANCY value of 1 is recommended to maintain a secondary copy of the table data. A large value for REDUNDANCY clause has an adverse impact on performance, network usage, and memory usage.</p> <p>For an example on the REDUNDANCY clause refer to <a href=../../../programming_guide/tables_in_snappydata/ >Tables in SnappyData</a>.</p> <p><a id=overflow></a></p> <h2 id=overflow-configuration>Overflow Configuration<a class=headerlink href=#overflow-configuration title="Permanent link">&para;</a></h2> <p>In SnappyData, row and column tables by default overflow to disk (which is equivalent to setting OVERFLOW to 'true'), based on EVICTION_BY criteria. Users cannot set OVERFLOW to 'false', except when EVICTION_BY is not set, in which case it disables the eviction.</p> <p>For example, setting EVICTION_BY to <code>LRUHEAPPERCENT</code> allows table data to be evicted to disk based on the current memory consumption of the server.</p> <p>Refer to <a href=../../../reference/sql_reference/create-table/ >CREATE TABLE</a> link to understand how to configure <a href=../../../reference/sql_reference/create-table/#overflow>OVERFLOW</a> and <a href=../../../reference/sql_reference/create-table/#eviction-by>EVICTION_BY</a> clauses.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>By default eviction is set to <code>overflow-to-disk</code>.</p> </div> <h2 id=known-limitation>Known Limitation<a class=headerlink href=#known-limitation title="Permanent link">&para;</a></h2> <h3 id=change-not-in-queries-to-use-not-exists-if-possible>Change NOT IN queries to use NOT EXISTS if possible<a class=headerlink href=#change-not-in-queries-to-use-not-exists-if-possible title="Permanent link">&para;</a></h3> <p>Currently, all <code>NOT IN</code> queries use an unoptimized plan and lead to a nested-loop-join which can take long if both sides are large (<a href=https://issues.apache.org/jira/browse/SPARK-16951>https://issues.apache.org/jira/browse/SPARK-16951</a>). Change your queries to use <code>NOT EXISTS</code> which uses an optimized anti-join plan.</p> <p>For example a query like:</p> <div class=highlight><pre><span></span><code><span class=k>select</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>from</span> <span class=n>T1</span> <span class=k>where</span> <span class=n>id</span> <span class=k>not</span> <span class=k>in</span> <span class=p>(</span><span class=k>select</span> <span class=n>id</span> <span class=k>from</span> <span class=n>T2</span><span class=p>)</span>
</code></pre></div> <p>can be changed to:</p> <div class=highlight><pre><span></span><code><span class=k>select</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>from</span> <span class=n>T1</span> <span class=k>where</span> <span class=k>not</span> <span class=k>exists</span> <span class=p>(</span><span class=k>select</span> <span class=mi>1</span> <span class=k>from</span> <span class=n>T2</span> <span class=k>where</span> <span class=n>T1</span><span class=p>.</span><span class=n>id</span> <span class=o>=</span> <span class=n>T2</span><span class=p>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div> <p>Be aware of the different null value semantics of the two operators as noted here for <a href=https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/2728434780191932/1483312212640900/6987336228780374/latest.html>Spark</a>.</p> <p>In a nutshell, the <code>NOT IN</code> operator is null-aware and skips the row if the sub-query has a null value, while the <code>NOT EXISTS</code> operator ignores the null values in the sub-query. In other words, the following two are equivalent when dealing with null values:</p> <div class=highlight><pre><span></span><code><span class=k>select</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>from</span> <span class=n>T1</span> <span class=k>where</span> <span class=n>id</span> <span class=k>not</span> <span class=k>in</span> <span class=p>(</span><span class=k>select</span> <span class=n>id</span> <span class=k>from</span> <span class=n>T2</span> <span class=k>where</span> <span class=n>id</span> <span class=k>is</span> <span class=k>not</span> <span class=k>null</span><span class=p>)</span>
<span class=k>select</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>from</span> <span class=n>T1</span> <span class=k>where</span> <span class=k>not</span> <span class=k>exists</span> <span class=p>(</span><span class=k>select</span> <span class=mi>1</span> <span class=k>from</span> <span class=n>T2</span> <span class=k>where</span> <span class=n>T1</span><span class=p>.</span><span class=n>id</span> <span class=o>=</span> <span class=n>T2</span><span class=p>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../design_principles/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Design Principles of Scalable, Partition-Aware Databases" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Design Principles of Scalable, Partition-Aware Databases </div> </div> </a> <a href=../../memory_management/ class="md-footer__link md-footer__link--next" aria-label="Next: Memory Management" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Memory Management </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright © 2017-2021 TIBCO Software Inc. All rights reserved. </div> </div> <div class=md-social> </div> <div class=md-footer-generator> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.indexes", "navigation.top", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.01824240.min.js", "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.e0abf5b0.min.js></script> </body> </html>
<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project documentation for SnappyData"><meta name=author content="SnappyData Team"><link href=https://tibcosoftware.github.io/snappydata/1.3.1/howto/use_stream_processing_with_snappydata/ rel=canonical><link rel=icon href=../../favicon.ico><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.0.3"><title>How to use Stream Processing with SnappyData - SnappyData™ 1.3.1</title><link rel=stylesheet href=../../assets/stylesheets/main.62128196.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.9204c3b2.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7CFira+Mono&display=fallback"><style>:root{--md-text-font:"Lato";--md-code-font:"Fira Mono"}</style><link rel=stylesheet href=../../extra.css><script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../..":"../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#how-to-use-stream-processing-with-snappydata class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="SnappyData™ 1.3.1" class="md-header__button md-logo" aria-label="SnappyData™ 1.3.1" data-md-component=logo> <img src=../../Images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> SnappyData™ 1.3.1 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> How to use Stream Processing with SnappyData </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/TIBCOSoftware/snappydata/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="SnappyData™ 1.3.1" class="md-nav__button md-logo" aria-label="SnappyData™ 1.3.1" data-md-component=logo> <img src=../../Images/logo.png alt=logo> </a> SnappyData™ 1.3.1 </label> <div class=md-nav__source> <a href=https://github.com/TIBCOSoftware/snappydata/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../release_notes/release_notes/ class=md-nav__link> Release Notes </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--index "> <a href=../../install/ >Provisioning SnappyData</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Provisioning SnappyData" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Provisioning SnappyData </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../install/system_requirements/ class=md-nav__link> System Requirements </a> </li> <li class=md-nav__item> <a href=../../install/install_on_premise/ class=md-nav__link> Installing SnappyData On-Premise </a> </li> <li class=md-nav__item> <a href=../../install/setting_up_cluster_on_amazon_web_services/ class=md-nav__link> Setting-up SnappyData Cluster on AWS </a> </li> <li class=md-nav__item> <a href=../../kubernetes/ class=md-nav__link> Setting-up SnappyData Cluster on Kubernetes </a> </li> <li class=md-nav__item> <a href=../../quickstart/getting_started_with_docker_image/ class=md-nav__link> Building a Docker Image with SnappyData Binaries </a> </li> <li class=md-nav__item> <a href=../../install/building_from_source/ class=md-nav__link> Building SnappyData from Source files </a> </li> <li class=md-nav__item> <a href=../../install/upgrade/ class=md-nav__link> Upgrading SnappyData </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--index "> <a href=../../quickstart/ >Getting Started</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/getting_started_by_installing_snappydata_on-premise/ class=md-nav__link> On-Premise </a> </li> <li class=md-nav__item> <a href=../../quickstart/getting_started_on_kubernetes/ class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../quickstart/getting_started_with_your_spark_distribution/ class=md-nav__link> Spark Distribution </a> </li> <li class=md-nav__item> <a href=../use_apache_zeppelin_with_snappydata/ class=md-nav__link> Using Apache Zeppelin with SnappyData </a> </li> <li class=md-nav__item> <a href=../../quickstart/snappydataquick_start/ class=md-nav__link> SnappyData Quickstart Guide </a> </li> <li class=md-nav__item> <a href=../../quickstart/using_spark_scala_apis/ class=md-nav__link> Using Spark Scala APIs </a> </li> <li class=md-nav__item> <a href=../../quickstart/performance_apache_spark/ class=md-nav__link> Benchmark 16-20x Faster Performance than Apache Spark </a> </li> <li class=md-nav__item> <a href=../../quickstart/using_sql/ class=md-nav__link> Using SQL </a> </li> <li class=md-nav__item> <a href=../../quickstart/structucture_streamingquickstart/ class=md-nav__link> Structured Streaming </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../configuring_cluster/configure_launch_cluster/ class=md-nav__link> Configure/Launch SnappyData Cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <div class="md-nav__link md-nav__link--index "> <a href=../../architecture/ >Concepts</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Concepts data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/core_components/ class=md-nav__link> Core Components </a> </li> <li class=md-nav__item> <a href=../../architecture/cluster_architecture/ class=md-nav__link> SnappyData Cluster Architecture </a> </li> <li class=md-nav__item> <a href=../../architecture/hybrid_cluster_manager/ class=md-nav__link> Hybrid Cluster Manager </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_5 type=checkbox id=__nav_6_5> <div class="md-nav__link md-nav__link--index "> <a href=../../consistency/ >Distributed Transactions</a> <label for=__nav_6_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Distributed Transactions" data-md-level=2> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Distributed Transactions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../consistency/using_transactions_row/ class=md-nav__link> How Transactions Work for Row Tables </a> </li> <li class=md-nav__item> <a href=../../consistency/using_snapshot_isolation_column/ class=md-nav__link> Lock-free Queries using MVCC and Snapshot Isolation for Column Tables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_6 type=checkbox id=__nav_6_6> <div class="md-nav__link md-nav__link--index "> <a href=../../affinity_modes/ >Affinity Modes</a> <label for=__nav_6_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Affinity Modes" data-md-level=2> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Affinity Modes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../affinity_modes/local_mode/ class=md-nav__link> Local Mode </a> </li> <li class=md-nav__item> <a href=../../affinity_modes/embedded_mode/ class=md-nav__link> Embedded SnappyData Store Mode </a> </li> <li class=md-nav__item> <a href=../../affinity_modes/connector_mode/ class=md-nav__link> SnappyData Smart Connector Mode </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >How Tos</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="How Tos" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> How Tos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../start_snappy_cluster/ class=md-nav__link> How to Start a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../check_status_cluster/ class=md-nav__link> How to Check the Status of a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../stop_snappy_cluster/ class=md-nav__link> How to Stop a SnappyData Cluster </a> </li> <li class=md-nav__item> <a href=../run_spark_job_inside_cluster/ class=md-nav__link> How to Run Spark Job inside the Cluster </a> </li> <li class=md-nav__item> <a href=../spark_installation_using_smart_connector/ class=md-nav__link> How to Access SnappyData Store from existing Spark Installation using Smart Connector </a> </li> <li class=md-nav__item> <a href=../use_snappy_shell/ class=md-nav__link> How to Use Snappy SQL shell (snappy-sql) </a> </li> <li class=md-nav__item> <a href=../create_row_tables_and_run_queries/ class=md-nav__link> How to Create Row Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../create_column_tables_and_run_queries/ class=md-nav__link> How to Create Column Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../load_data_into_snappydata_tables/ class=md-nav__link> How to Load Data into SnappyData Tables </a> </li> <li class=md-nav__item> <a href=../load_data_from_external_data_stores/ class=md-nav__link> How to Load Data from External Data Stores (e.g. HDFS, Cassandra, Hive, etc) </a> </li> <li class=md-nav__item> <a href=../perform_a_colocated_join/ class=md-nav__link> How to Perform a Colocated Join </a> </li> <li class=md-nav__item> <a href=../connect_using_jdbc_driver/ class=md-nav__link> How to Connect using JDBC Driver </a> </li> <li class=md-nav__item> <a href=../using_snappydata_for_any_spark_dist/ class=md-nav__link> How to use SnappyData for any Spark Distribution </a> </li> <li class=md-nav__item> <a href=../store_retrieve_complex_datatypes_JDBC/ class=md-nav__link> How to Store and Retrieve Complex Data Types in JDBC Programs </a> </li> <li class=md-nav__item> <a href=../store_and_query_objects/ class=md-nav__link> How to Store and Query Objects </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> How to use Stream Processing with SnappyData <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> How to use Stream Processing with SnappyData </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#structured-streaming class=md-nav__link> Structured Streaming </a> <nav class=md-nav aria-label="Structured Streaming"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-snappydata-structured-streaming-api class=md-nav__link> Using SnappyData Structured Streaming API </a> <nav class=md-nav aria-label="Using SnappyData Structured Streaming API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#snappydata-specific-options class=md-nav__link> SnappyData Specific options </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#handling-inserts-updates-and-deletes class=md-nav__link> Handling Inserts, Updates and Deletes </a> </li> <li class=md-nav__item> <a href=#event-processing-order class=md-nav__link> Event Processing Order </a> </li> <li class=md-nav__item> <a href=#sink-state-table class=md-nav__link> Sink State Table </a> <nav class=md-nav aria-label="Sink State Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#behavior-of-sink-state-table-in-a-secure-cluster class=md-nav__link> Behavior of Sink State Table in a Secure cluster </a> </li> <li class=md-nav__item> <a href=#maintaining-idempotency-in-case-of-stream-failures class=md-nav__link> Maintaining Idempotency In Case Of Stream Failures </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#overriding-default-sink-behavior class=md-nav__link> Overriding Default Sink Behavior </a> </li> <li class=md-nav__item> <a href=#resetting-a-streaming-query class=md-nav__link> Resetting a Streaming Query </a> </li> <li class=md-nav__item> <a href=#best-practices-for-structured-streaming class=md-nav__link> Best Practices for Structured Streaming </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> Limitations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spark-streaming-dstreams-model class=md-nav__link> Spark Streaming DStreams Model </a> <nav class=md-nav aria-label="Spark Streaming DStreams Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-sample class=md-nav__link> Code Sample </a> </li> <li class=md-nav__item> <a href=#using-stream-processing-with-snappydata class=md-nav__link> Using Stream Processing with SnappyData </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../use_transactions_isolation_levels/ class=md-nav__link> How to use Transactions Isolation Levels </a> </li> <li class=md-nav__item> <a href=../use_synopsis_data_engine_to_run_approximate_queries/ class=md-nav__link> How to use Approximate Query Processing (AQP) to Run Approximate Queries </a> </li> <li class=md-nav__item> <a href=../use_python_to_create_tables_and_run_queries/ class=md-nav__link> How to use Python to Create Tables and Run Queries </a> </li> <li class=md-nav__item> <a href=../connect_using_odbc_driver/ class=md-nav__link> How to Connect using ODBC Driver </a> </li> <li class=md-nav__item> <a href=../connect_to_the_cluster_from_external_clients/ class=md-nav__link> How to Connect to the Cluster from External Network </a> </li> <li class=md-nav__item> <a href=../import_from_hive_table/ class=md-nav__link> How to Import Data from Hive Table into SnappyData Table </a> </li> <li class=md-nav__item> <a href=../export_hdfs/ class=md-nav__link> How to Export and Restore Table Data using HDFS </a> </li> <li class=md-nav__item> <a href=../connect_oss_vis_client_tools/ class=md-nav__link> How to Access SnappyData from Various SQL Client Tools </a> </li> <li class=md-nav__item> <a href=../connecttibcospotfire/ class=md-nav__link> How to connect TIBCO Spotfire® Desktop to SnappyData </a> </li> <li class=md-nav__item> <a href=../tableauconnect/ class=md-nav__link> How to Connect Tableau to SnappyData </a> </li> <li class=md-nav__item> <a href=../use_apache_zeppelin_with_snappydata/ class=md-nav__link> How to Use Apache Zeppelin with SnappyData </a> </li> <li class=md-nav__item> <a href=../concurrent_apache_zeppelin_access_to_secure_snappydata/ class=md-nav__link> How to Configure Apache Zeppelin to Securely and Concurrently access the SnappyData Cluster </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <div class="md-nav__link md-nav__link--index "> <a href=../../programming_guide/ >Programming Guide</a> <label for=__nav_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Programming Guide" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Programming Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programming_guide/sparksession_snappysession_and_snappystreamingcontext/ class=md-nav__link> SparkSession, SnappySession and SnappyStreamingContext </a> </li> <li class=md-nav__item> <a href=../../programming_guide/snappydata_jobs/ class=md-nav__link> Snappy Jobs </a> </li> <li class=md-nav__item> <a href=../../programming_guide/managing_jar_files/ class=md-nav__link> Managing JAR Files </a> </li> <li class=md-nav__item> <a href=../../programming_guide/using_snappydata_shell/ class=md-nav__link> Using Snappy Shell </a> </li> <li class=md-nav__item> <a href=../../programming_guide/using_the_spark_shell_and_spark-submit/ class=md-nav__link> Using the Spark Shell and spark-submit </a> </li> <li class=md-nav__item> <a href=../../programming_guide/using_pyspark_shell/ class=md-nav__link> Using pyspark Shell </a> </li> <li class=md-nav__item> <a href=../../programming_guide/scala_interpreter/ class=md-nav__link> Executing Spark Scala Code using SQL </a> </li> <li class=md-nav__item> <a href=../../programming_guide/working_with_hadoop_yarn_cluster_manager/ class=md-nav__link> Working with Hadoop YARN cluster Manager </a> </li> <li class=md-nav__item> <a href=../../programming_guide/using_jdbc_with_snappydata/ class=md-nav__link> Using JDBC with SnappyData </a> </li> <li class=md-nav__item> <a href=../../programming_guide/spark_jdbc_connector/ class=md-nav__link> Accessing SnappyData Tables from any Spark (2.1+) Cluster </a> </li> <li class=md-nav__item> <a href=../../programming_guide/multiple_language_binding_using_thrift_protocol/ class=md-nav__link> Multiple Language Binding using Thrift Protocol </a> </li> <li class=md-nav__item> <a href=../../programming_guide/building_snappydata_applications_using_spark_api/ class=md-nav__link> Building SnappyData Applications using Spark API </a> </li> <li class=md-nav__item> <a href=../../programming_guide/tables_in_snappydata/ class=md-nav__link> Tables in SnappyData </a> </li> <li class=md-nav__item> <a href=../../programming_guide/stream_processing_using_sql/ class=md-nav__link> Stream Processing using SQL </a> </li> <li class=md-nav__item> <a href=../../programming_guide/udf_and_udaf/ class=md-nav__link> User Defined Functions (UDF) and User Defined Aggregate Functions (UDAF) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <div class="md-nav__link md-nav__link--index "> <a href=../../best_practices/ >Best Practices</a> <label for=__nav_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Best Practices" data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Best Practices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best_practices/setup_cluster/ class=md-nav__link> Tuning for Concurrency and Computation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9_3 type=checkbox id=__nav_9_3> <div class="md-nav__link md-nav__link--index "> <a href=../../best_practices/design_schema/ >Designing your Database and Schema</a> <label for=__nav_9_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Designing your Database and Schema" data-md-level=2> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> Designing your Database and Schema </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../best_practices/design_schema/design_principles/ class=md-nav__link> Design Principles of Scalable, Partition-Aware Databases </a> </li> <li class=md-nav__item> <a href=../../best_practices/design_schema/optimizing_query_latency/ class=md-nav__link> Optimizing Query Latency: Partitioning and Replication Strategies </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../best_practices/memory_management/ class=md-nav__link> Memory Management </a> </li> <li class=md-nav__item> <a href=../../best_practices/ha_considerations/ class=md-nav__link> HA Considerations </a> </li> <li class=md-nav__item> <a href=../../best_practices/structured_streaming_best_practices/ class=md-nav__link> Structured Streaming </a> </li> <li class=md-nav__item> <a href=../../best_practices/important_settings/ class=md-nav__link> Important Settings </a> </li> <li class=md-nav__item> <a href=../../best_practices/transactions_best_practices/ class=md-nav__link> SnappyData Distributed Transactions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <div class="md-nav__link md-nav__link--index "> <a href=../../sde/ >Approximate Query Processing</a> <label for=__nav_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Approximate Query Processing" data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Approximate Query Processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sde/key_concepts/ class=md-nav__link> Key Concepts </a> </li> <li class=md-nav__item> <a href=../../sde/working_with_stratified_samples/ class=md-nav__link> Working with Stratified Samples </a> </li> <li class=md-nav__item> <a href=../../sde/running_queries/ class=md-nav__link> Running Queries </a> </li> <li class=md-nav__item> <a href=../../sde/more_examples/ class=md-nav__link> More Examples </a> </li> <li class=md-nav__item> <a href=../../sde/sample_selection/ class=md-nav__link> Sample Selection </a> </li> <li class=md-nav__item> <a href=../../sde/hac_contracts/ class=md-nav__link> High-level Accuracy Contracts (HAC) </a> </li> <li class=md-nav__item> <a href=../../sde/sketching/ class=md-nav__link> Sketching </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <div class="md-nav__link md-nav__link--index "> <a href=../../connectors/ >Working with Data Sources</a> <label for=__nav_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Working with Data Sources" data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Working with Data Sources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/data_formats/ class=md-nav__link> Supported Data Formats </a> </li> <li class=md-nav__item> <a href=../../connectors/access_cloud_data/ class=md-nav__link> Accessing Cloud Storages </a> </li> <li class=md-nav__item> <a href=../../data/external_hive_support/ class=md-nav__link> Connecting to External Hive Metastores </a> </li> <li class=md-nav__item> <a href=../../connectors/cdc_connector/ class=md-nav__link> Using the SnappyData CDC (Change Data Capture) Connector </a> </li> <li class=md-nav__item> <a href=../../connectors/jdbc_streaming_connector/ class=md-nav__link> Using the SnappyData JDBC Streaming Connector </a> </li> <li class=md-nav__item> <a href=../../connectors/tdv/ class=md-nav__link> Connecting to TIBCO Data Virtualization (TDV) </a> </li> <li class=md-nav__item> <a href=../../connectors/deployment_dependency_jar/ class=md-nav__link> Deploying Third Party Connectors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_12 type=checkbox id=__nav_12> <div class="md-nav__link md-nav__link--index "> <a href=../../monitoring/ >Managing and Monitoring</a> <label for=__nav_12> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Managing and Monitoring" data-md-level=1> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Managing and Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> SnappyData Monitoring UI </a> </li> <li class=md-nav__item> <a href=../../monitoring/configure_high_availability/ class=md-nav__link> Configuring High Availability for a Partitioned Table </a> </li> <li class=md-nav__item> <a href=../../monitoring/configure_logging/ class=md-nav__link> Configuring Logging </a> </li> <li class=md-nav__item> <a href=../../monitoring/metrics/ class=md-nav__link> Monitoring with Metrics </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitor-manage/ class=md-nav__link> Getting Information from SnappyData System Tables </a> </li> <li class=md-nav__item> <a href=../../monitoring/recoveringdata/ class=md-nav__link> Recovering Data During Cluster Failures </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_13 type=checkbox id=__nav_13> <div class="md-nav__link md-nav__link--index "> <a href=../../security/ >Managing Security</a> <label for=__nav_13> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Managing Security" data-md-level=1> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> Managing Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../security/launching_the_cluster_in_secure_mode/ class=md-nav__link> Launching the Cluster in Secure Mode </a> </li> <li class=md-nav__item> <a href=../../security/specify_encrypt_passwords_conf_client/ class=md-nav__link> Specifying Encrypted Passwords in Conf Files or in Client Connections </a> </li> <li class=md-nav__item> <a href=../../security/authentication_connecting_to_a_secure_cluster/ class=md-nav__link> Authentication - Connecting to a Secure Cluster </a> </li> <li class=md-nav__item> <a href=../../security/authorization/ class=md-nav__link> Authorization </a> </li> <li class=md-nav__item> <a href=../../security/row_level_security/ class=md-nav__link> Implementing Row Level Security </a> </li> <li class=md-nav__item> <a href=../../security/configuring_network_encryption_and_authentication_using_ssl/ class=md-nav__link> Configuring Network Encryption and Authentication using SSL </a> </li> <li class=md-nav__item> <a href=../../configuring_cluster/ssl_setup/ class=md-nav__link> Enabling SSL Encryption in Different Socket Endpoints of SnappyData </a> </li> <li class=md-nav__item> <a href=../../configuring_cluster/securinguiconnection/ class=md-nav__link> Securing SnappyData UI Connection </a> </li> <li class=md-nav__item> <a href=../../security/user_names_for_authentication_authorization_and_membership/ class=md-nav__link> User Names for Authentication, Authorization, and Membership </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_14 type=checkbox id=__nav_14> <div class="md-nav__link md-nav__link--index "> <a href=../../statistics/ >Evaluating Statistics for the System and Applications</a> <label for=__nav_14> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Evaluating Statistics for the System and Applications" data-md-level=1> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Evaluating Statistics for the System and Applications </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../statistics/collecting_system_stats/ class=md-nav__link> Collecting System Statistics </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_14_3 type=checkbox id=__nav_14_3> <div class="md-nav__link md-nav__link--index "> <a href=../../statistics/vsd/ >Using VSD to Analyze Statistics</a> <label for=__nav_14_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Using VSD to Analyze Statistics" data-md-level=2> <label class=md-nav__title for=__nav_14_3> <span class="md-nav__icon md-icon"></span> Using VSD to Analyze Statistics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../statistics/vsd/running_vsd/ class=md-nav__link> Installing and Running VSD </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd_transactions/ class=md-nav__link> Transaction Performance </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd_tables/ class=md-nav__link> Table Performance </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd_statements/ class=md-nav__link> SQL Statement Performance </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd_memory/ class=md-nav__link> Memory Usage </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd-connection-stats/ class=md-nav__link> Client Connections </a> </li> <li class=md-nav__item> <a href=../../statistics/vsd/vsd_cpu/ class=md-nav__link> CPU Usage </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15 type=checkbox id=__nav_15> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/ >Reference Guides</a> <label for=__nav_15> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Reference Guides" data-md-level=1> <label class=md-nav__title for=__nav_15> <span class="md-nav__icon md-icon"></span> Reference Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../configuring_cluster/configuring_cluster/ class=md-nav__link> Configuration Reference </a> </li> <li class=md-nav__item> <a href=../../configuring_cluster/property_description/ class=md-nav__link> List of Properties </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4 type=checkbox id=__nav_15_4> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/sql_reference/ >SQL Reference Guide</a> <label for=__nav_15_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="SQL Reference Guide" data-md-level=2> <label class=md-nav__title for=__nav_15_4> <span class="md-nav__icon md-icon"></span> SQL Reference Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/sql_reference/alter-table/ class=md-nav__link> ALTER TABLE </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_3 type=checkbox id=__nav_15_4_3> <label class=md-nav__link for=__nav_15_4_3> CREATE Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CREATE Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_3> <span class="md-nav__icon md-icon"></span> CREATE Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/sql_reference/create-diskstore/ class=md-nav__link> CREATE DISKSTORE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-external-table/ class=md-nav__link> CREATE EXTERNAL TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-function/ class=md-nav__link> CREATE FUNCTION </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-index/ class=md-nav__link> CREATE INDEX </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-schema/ class=md-nav__link> CREATE SCHEMA </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-stream-table/ class=md-nav__link> CREATE STREAM TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-sample-table/ class=md-nav__link> CREATE SAMPLE TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-table/ class=md-nav__link> CREATE TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-temporary-table/ class=md-nav__link> CREATE TEMPORARY TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/create-view/ class=md-nav__link> CREATE VIEW </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/delete/ class=md-nav__link> DELETE </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_5 type=checkbox id=__nav_15_4_5> <label class=md-nav__link for=__nav_15_4_5> DROP Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DROP Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_5> <span class="md-nav__icon md-icon"></span> DROP Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/sql_reference/drop-diskstore/ class=md-nav__link> DROP DISKSTORE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/drop-function/ class=md-nav__link> DROP FUNCTION </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/drop-index/ class=md-nav__link> DROP INDEX </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/drop-table/ class=md-nav__link> DROP TABLE/EXTERNAL TABLE/SAMPLE TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/drop-schema/ class=md-nav__link> DROP SCHEMA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_4_6 type=checkbox id=__nav_15_4_6> <label class=md-nav__link for=__nav_15_4_6> DEPLOY Statements <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DEPLOY Statements" data-md-level=3> <label class=md-nav__title for=__nav_15_4_6> <span class="md-nav__icon md-icon"></span> DEPLOY Statements </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/sql_reference/deploy_package/ class=md-nav__link> DEPLOY PACKAGE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/deploy_jar/ class=md-nav__link> DEPLOY JAR </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/undeploy/ class=md-nav__link> UNDEPLOY </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/exec-scala/ class=md-nav__link> exec scala </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/explain/ class=md-nav__link> EXPLAIN </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/grant/ class=md-nav__link> GRANT </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/grant-all/ class=md-nav__link> GRANT ALL </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/insert/ class=md-nav__link> INSERT </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/lateral-view/ class=md-nav__link> LATERAL VIEW </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/list/ class=md-nav__link> LIST </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/pivot/ class=md-nav__link> PIVOT </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/put-into/ class=md-nav__link> PUT INTO </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/revoke/ class=md-nav__link> REVOKE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/revoke_all/ class=md-nav__link> REVOKE ALL </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/select/ class=md-nav__link> SELECT </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/set-isolation/ class=md-nav__link> SET ISOLATION </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/set-schema/ class=md-nav__link> SET SCHEMA </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/truncate-table/ class=md-nav__link> TRUNCATE TABLE </a> </li> <li class=md-nav__item> <a href=../../reference/sql_reference/update/ class=md-nav__link> UPDATE </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_5 type=checkbox id=__nav_15_5> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/sql_functions/ >SQL Functions</a> </div> <nav class=md-nav aria-label="SQL Functions" data-md-level=2> <label class=md-nav__title for=__nav_15_5> <span class="md-nav__icon md-icon"></span> SQL Functions </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/sql_general_limitations/ class=md-nav__link> SQL General Limitations </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_7 type=checkbox id=__nav_15_7> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/inbuilt_system_procedures/ >Built-in System Procedures and Built-in Functions</a> <label for=__nav_15_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Built-in System Procedures and Built-in Functions" data-md-level=2> <label class=md-nav__title for=__nav_15_7> <span class="md-nav__icon md-icon"></span> Built-in System Procedures and Built-in Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/dump-stacks/ class=md-nav__link> DUMP_STACKS </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/rebalance-all-buckets/ class=md-nav__link> REBALANCE_ALL_BUCKETS </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/set_critical_heap_percentage/ class=md-nav__link> SET_CRITICAL_HEAP_PERCENTAGE </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/set-trace-flag/ class=md-nav__link> SET_TRACE_FLAG </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/sys_remove_metastore_entry/ class=md-nav__link> REMOVE_METASTORE_ENTRY </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/export_ddl/ class=md-nav__link> EXPORT_DDLS </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/export_data/ class=md-nav__link> EXPORT_DATA </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/dsid/ class=md-nav__link> DSID </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/current_user/ class=md-nav__link> CURRENT_USER </a> </li> <li class=md-nav__item> <a href=../../reference/inbuilt_system_procedures/current_user_ldap_groups/ class=md-nav__link> CURRENT_USER_LDAP_GROUPS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_8 type=checkbox id=__nav_15_8> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/system_tables/ >System Tables</a> <label for=__nav_15_8> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="System Tables" data-md-level=2> <label class=md-nav__title for=__nav_15_8> <span class="md-nav__icon md-icon"></span> System Tables </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/system_tables/members/ class=md-nav__link> MEMBERS </a> </li> <li class=md-nav__item> <a href=../../reference/system_tables/sysdiskstores/ class=md-nav__link> SYSDISKSTORES </a> </li> <li class=md-nav__item> <a href=../../reference/system_tables/sysdiskstoreids/ class=md-nav__link> SYSDISKSTOREIDS </a> </li> <li class=md-nav__item> <a href=../../reference/system_tables/systables/ class=md-nav__link> SYSTABLES </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_9 type=checkbox id=__nav_15_9> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/command_line_utilities/ >Command Line Utilities</a> <label for=__nav_15_9> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Command Line Utilities" data-md-level=2> <label class=md-nav__title for=__nav_15_9> <span class="md-nav__icon md-icon"></span> Command Line Utilities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-backup/ class=md-nav__link> backup and restore </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-compact-all-disk-stores/ class=md-nav__link> compact-all-disk-stores </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-compact-disk-store/ class=md-nav__link> compact-disk-store </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/validate_diskstore/ class=md-nav__link> validate-disk-store </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-list-missing-disk-stores/ class=md-nav__link> list-missing-disk-stores </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-revoke-missing-disk-stores/ class=md-nav__link> revoke-missing-disk-store </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-unblock-disk-stores/ class=md-nav__link> unblock-disk-store </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-run/ class=md-nav__link> run </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/scala-cli/ class=md-nav__link> scala CLI </a> </li> <li class=md-nav__item> <a href=../../reference/command_line_utilities/store-version/ class=md-nav__link> version </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_10 type=checkbox id=__nav_15_10> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/interactive_commands/ >Snappy-SQL Shell Interactive Commands</a> <label for=__nav_15_10> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Snappy-SQL Shell Interactive Commands" data-md-level=2> <label class=md-nav__title for=__nav_15_10> <span class="md-nav__icon md-icon"></span> Snappy-SQL Shell Interactive Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/interactive_commands/autocommit/ class=md-nav__link> autocommit </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/commit/ class=md-nav__link> commit </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/connect_client/ class=md-nav__link> connect client </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/connect/ class=md-nav__link> connect </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/describe/ class=md-nav__link> describe </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/disconnect/ class=md-nav__link> disconnect </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/elapsedtime/ class=md-nav__link> elapsedtime </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/exit/ class=md-nav__link> exit </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/maximumdisplaywidth/ class=md-nav__link> MaximumDisplayWidth </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/rollback/ class=md-nav__link> rollback </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/run/ class=md-nav__link> run </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/set_connection/ class=md-nav__link> set connection </a> </li> <li class=md-nav__item> <a href=../../reference/interactive_commands/show/ class=md-nav__link> show </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_15_11 type=checkbox id=__nav_15_11> <div class="md-nav__link md-nav__link--index "> <a href=../../reference/configuration_parameters/ >Configuration Parameters</a> <label for=__nav_15_11> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Configuration Parameters" data-md-level=2> <label class=md-nav__title for=__nav_15_11> <span class="md-nav__icon md-icon"></span> Configuration Parameters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ack-severe-alert-threshold/ class=md-nav__link> ack-severe-alert-threshold </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ack-wait-threshold/ class=md-nav__link> ack-wait-threshold </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/allow-explicit-commit/ class=md-nav__link> allow-explicit-commit </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/archive-disk-space-limit/ class=md-nav__link> archive-disk-space-limit </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/archive-file-size-limit/ class=md-nav__link> archive-file-size-limit </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/bind-address/ class=md-nav__link> bind-address </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/enable-network-partition-detection/ class=md-nav__link> enable-network-partition-detection </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/enable-stats/ class=md-nav__link> enable-stats </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/enable-time-statistics/ class=md-nav__link> enable-time-statistics </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/enable-timestats/ class=md-nav__link> enable-timestats </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/enforce-unique-host/ class=md-nav__link> enforce-unique-host </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/init-scripts/ class=md-nav__link> init-scripts </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/load-balance/ class=md-nav__link> load-balance </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/locators/ class=md-nav__link> locators </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/log-file/ class=md-nav__link> log-file </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/log-level/ class=md-nav__link> log-level </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/member-timeout/ class=md-nav__link> member-timeout </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/membership-port-range/ class=md-nav__link> membership-port-range </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/password/ class=md-nav__link> password </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/read-timeout/ class=md-nav__link> read-timeout </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/redundancy-zone/ class=md-nav__link> redundancy-zone </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/secondary-locators/ class=md-nav__link> secondary-locators </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/skip-constraint-checks/ class=md-nav__link> skip-constraint-checks </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/skip-locks/ class=md-nav__link> skip-locks </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/socket-buffer-size/ class=md-nav__link> socket-buffer-size </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/socket-lease-time/ class=md-nav__link> socket-lease-time </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappydata.datadictionary.allow-startup-errors/ class=md-nav__link> gemfirexd.datadictionary.allow-startup-errors </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappydata.default-startup-recovery-delay/ class=md-nav__link> gemfirexd.default-startup-recovery-delay </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappy.history/ class=md-nav__link> snappy.history </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappydata.max-lock-wait/ class=md-nav__link> gemfirexd.max-lock-wait </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappydata.query-cancellation-interval/ class=md-nav__link> gemfirexd.query-cancellation-interval </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/snappydata.query-timeout/ class=md-nav__link> gemfirexd.query-timeout </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ssl_enabled/ class=md-nav__link> ssl-enabled </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ssl_protocols/ class=md-nav__link> ssl-protocols </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ssl_ciphers/ class=md-nav__link> ssl-ciphers </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/ssl_require_auth/ class=md-nav__link> ssl-require-authentication </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/start-locator/ class=md-nav__link> start-locator </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/statistic-archive-file/ class=md-nav__link> statistic-archive-file </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/statistic-sample-rate/ class=md-nav__link> statistic-sample-rate </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/statistic-sampling-enabled/ class=md-nav__link> statistic-sampling-enabled </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/sync-commits/ class=md-nav__link> sync-commits </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/sys-disk-dir/ class=md-nav__link> sys-disk-dir </a> </li> <li class=md-nav__item> <a href=../../reference/configuration_parameters/user/ class=md-nav__link> user </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../apidocsintro/ class=md-nav__link> Full API Reference Guides </a> </li> <li class=md-nav__item> <a href=../../reference/API_Reference/odbc_supported_apis/ class=md-nav__link> ODBC Supported API </a> </li> <li class=md-nav__item> <a href=../../reference/misc/supported_datatypes/ class=md-nav__link> Supported Data Types </a> </li> <li class=md-nav__item> <a href=../../reference/misc/passwordless_ssh/ class=md-nav__link> Configuring SSH Login without Password </a> </li> <li class=md-nav__item> <a href=../../setting_up_odbc_driver/ class=md-nav__link> Setting Up SnappyData ODBC Driver </a> </li> <li class=md-nav__item> <a href=../../setting_up_jdbc_driver_qlikview/ class=md-nav__link> Setting Up SnappyData JDBC Client and QlikView </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../experimental/ class=md-nav__link> Experimental Features </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_17 type=checkbox id=__nav_17> <div class="md-nav__link md-nav__link--index "> <a href=../../troubleshooting/ >Troubleshooting Common Problems</a> <label for=__nav_17> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Troubleshooting Common Problems" data-md-level=1> <label class=md-nav__title for=__nav_17> <span class="md-nav__icon md-icon"></span> Troubleshooting Common Problems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../troubleshooting/member_startup_problems/ class=md-nav__link> Member Startup Problems </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/recovering_from_a_conflictingpersistentdataexception/ class=md-nav__link> Recovering from a ConflictingPersistentDataException </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/preventing_disk_full_errors/ class=md-nav__link> Preventing Disk Full Errors </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/recovering_from_disk_full_errors/ class=md-nav__link> Recovering from Disk Full Errors </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/catalog_inconsistency/ class=md-nav__link> Resolving Catalog Inconsistency Issues </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/oom/ class=md-nav__link> Troubleshooting Out-of-Memory (OOM) Error </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/collect_debug_artifacts/ class=md-nav__link> Collecting Logs, Stats and Dumps Using the collect-debug-artifacts Script </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/troubleshooting_error_messages/ class=md-nav__link> Troubleshooting Error Messages </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../unsupported/ class=md-nav__link> Unsupported Third-Party Modules </a> </li> <li class=md-nav__item> <a href=../../additional_files/open_source_components/ class=md-nav__link> Community Edition Features </a> </li> <li class=md-nav__item> <a href=../../prev_doc_ver/ class=md-nav__link> Doc Archives </a> </li> <li class=md-nav__item> <a href=../../techsupport/ class=md-nav__link> Contact and Support </a> </li> <li class=md-nav__item> <a href=../../LICENSE/ class=md-nav__link> License </a> </li> <li class=md-nav__item> <a href=../../imp_info/ class=md-nav__link> Important Information </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#structured-streaming class=md-nav__link> Structured Streaming </a> <nav class=md-nav aria-label="Structured Streaming"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#using-snappydata-structured-streaming-api class=md-nav__link> Using SnappyData Structured Streaming API </a> <nav class=md-nav aria-label="Using SnappyData Structured Streaming API"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#snappydata-specific-options class=md-nav__link> SnappyData Specific options </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#handling-inserts-updates-and-deletes class=md-nav__link> Handling Inserts, Updates and Deletes </a> </li> <li class=md-nav__item> <a href=#event-processing-order class=md-nav__link> Event Processing Order </a> </li> <li class=md-nav__item> <a href=#sink-state-table class=md-nav__link> Sink State Table </a> <nav class=md-nav aria-label="Sink State Table"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#behavior-of-sink-state-table-in-a-secure-cluster class=md-nav__link> Behavior of Sink State Table in a Secure cluster </a> </li> <li class=md-nav__item> <a href=#maintaining-idempotency-in-case-of-stream-failures class=md-nav__link> Maintaining Idempotency In Case Of Stream Failures </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#overriding-default-sink-behavior class=md-nav__link> Overriding Default Sink Behavior </a> </li> <li class=md-nav__item> <a href=#resetting-a-streaming-query class=md-nav__link> Resetting a Streaming Query </a> </li> <li class=md-nav__item> <a href=#best-practices-for-structured-streaming class=md-nav__link> Best Practices for Structured Streaming </a> </li> <li class=md-nav__item> <a href=#limitations class=md-nav__link> Limitations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spark-streaming-dstreams-model class=md-nav__link> Spark Streaming DStreams Model </a> <nav class=md-nav aria-label="Spark Streaming DStreams Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code-sample class=md-nav__link> Code Sample </a> </li> <li class=md-nav__item> <a href=#using-stream-processing-with-snappydata class=md-nav__link> Using Stream Processing with SnappyData </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/TIBCOSoftware/snappydata/edit/master/docs/howto/use_stream_processing_with_snappydata.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <p><a id=howto-streams></a></p> <h1 id=how-to-use-stream-processing-with-snappydata>How to use Stream Processing with SnappyData<a class=headerlink href=#how-to-use-stream-processing-with-snappydata title="Permanent link">&para;</a></h1> <p>SnappyData supports both the older <a href=#dstreams>Spark Streaming model (based on DStreams)</a> as well as the newer <a href=#structuredstreaming>Structured Streaming model</a>. Unlike the Spark streaming DStreams model, that is based on RDDs, SnappyData supports Spark SQL in both models.</p> <p><a id=structuredstreaming> </a></p> <h2 id=structured-streaming>Structured Streaming<a class=headerlink href=#structured-streaming title="Permanent link">&para;</a></h2> <p>The SnappyData structured streaming programming model is the same as <a href=https://spark.apache.org/docs/2.1.3/structured-streaming-programming-guide.html>Spark structured streaming</a>. The only difference is support for ingesting streaming dataframes into SnappyData tables through a built-in <strong>Sink</strong>.</p> <p>SnappyData provides a build-in output <strong>Sink</strong> which simplifies ingestion of streaming dataframes into SnappyData tables. The <strong>Sink</strong> supports idempotent writes, ensuring consistency of data when failures occur, as well as support for all mutation operations such as inserts, appends, updates, puts, and deletes.</p> <p>The output data source name for SnappyData is <code>snappysink</code>. A minimal code example for structured streaming with socket source and <strong>Snappy Sink</strong> is available <a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/SocketSourceExampleWithSnappySink.scala>here</a>. You can also refer to <a href=../../quickstart/structucture_streamingquickstart/ >Structured Streaming Quickstart guide</a>.</p> <p>For more examples, refer to <a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming>structured streaming examples</a>. The following examples are shown:</p> <table> <thead> <tr> <th>Example</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/CDCExample.scala>CDCExample.scala</a></td> <td>An example explaining CDC (change data capture) use case with SnappyData streaming Sink.</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/CSVFileSourceExampleWithSnappySink.scala>CSVFileSourceExampleWithSnappySink.scala</a></td> <td>An example of structured streaming depicting CSV file processing with Snappy Sink.</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/CSVKafkaSourceExampleWithSnappySink.scala>CSVKafkaSourceExampleWithSnappySink.scala</a></td> <td>An example of structured streaming depicting processing of JSON coming from kafka source using snappy Sink.</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/JSONFileSourceExampleWithSnappySink.scala>JSONFileSourceExampleWithSnappySink.scala</a></td> <td>An example of structured streaming depicting JSON file processing with Snappy Sink.</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/JSONKafkaSourceExampleWithSnappySink.scala>JSONKafkaSourceExampleWithSnappySink.scala</a></td> <td>An example of structured streaming depicting processing of JSON coming from Kafka source using Snappy Sink</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/SocketSourceExample.scala>SocketSourceExample.scala</a></td> <td>An example showing usage of structured streaming with console Sink.</td> </tr> <tr> <td><a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/SocketSourceExampleWithSnappySink.scala>SocketSourceExampleWithSnappySink.scala</a></td> <td>An example showing usage of structured streaming with SnappyData.</td> </tr> </tbody> </table> <p>The topic included the following sections:</p> <ul> <li><a href=#ssapi>Using SnappyData Structured Streaming API</a></li> <li><a href=#haninsertupdatesdeletes>Handling Inserts, Updates and Deletes</a></li> <li><a href=#event_order>Event Processing Order</a></li> <li><a href=#sinkstatetable>Sink State Table</a></li> <li><a href=#overridesinkbeha>Overriding Default Sink Behavior</a></li> <li><a href=#resetstreamquery>Resetting a Streaming Query</a></li> <li><a href=#bestpracticesstruc>Best Practices for Structured Streaming</a></li> <li><a href=#limitationsstruc>Limitations</a></li> </ul> <p><a id=ssapi> </a></p> <h3 id=using-snappydata-structured-streaming-api>Using SnappyData Structured Streaming API<a class=headerlink href=#using-snappydata-structured-streaming-api title="Permanent link">&para;</a></h3> <p>The following code snippet, from the example, explains the usage of SnappyData's <strong>Structured Streaming API</strong>:</p> <div class=highlight><pre><span></span><code>    val streamingQuery = structDF
        .filter(_.signal &gt; 10)      // so transformation on input dataframe
        .writeStream
        .format(&quot;snappysink&quot;)       // Required to ingest into SnappyData tables
        .queryName(&quot;Devices&quot;)   // Required when using snappysink. Must be unique across the SnappyData cluster.
        .trigger(ProcessingTime(&quot;1 seconds&quot;))
        .option(&quot;tableName&quot;, &quot;devices&quot;)     // Required: name of the snappy table where data will be ingested.
        .option(&quot;checkpointLocation&quot;, checkpointDirectory)
        .start()
</code></pre></div> <h4 id=snappydata-specific-options>SnappyData Specific options<a class=headerlink href=#snappydata-specific-options title="Permanent link">&para;</a></h4> <p>The following are SnappyData specific options which can be configured for Structured Streaming:</p> <table> <thead> <tr> <th>Options</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>tableName</code></td> <td>Name of the SnappyData table where the streaming data is ingested. The property is case-insensitive and is mandatory.</td> </tr> <tr> <td><code>stateTableSchema</code></td> <td>Name of the schema under which SnappyData’s internal state table will be created. This table is used to track the progress of the streaming queries and enables snappy sink to behave in an idempotent manner when streaming query is restarted after abrupt failures or planned down time.This is a mandatory property when security is enabled for the SnappyData cluster. When security is disabled, snappy sink uses APP schema by default to store the sink state table.</td> </tr> <tr> <td><code>conflation</code></td> <td>This is an optional boolean property with the default value set to <code>false</code>. Conflation is enabled only when you set this property to <code>true</code>. If this property is set to <code>true</code> and if the incoming streaming batch contains multiple events on the same key, <strong>Snappy Sink</strong> automatically reduces this to a single operation. This is typically the last operation on any given key for the batch that is being processed. This property is only applicable when the <code>_eventType</code> column is available (see <a href=#eventypecolumn>below</a>) and the target table has Keys defined. For more information, see <a href=#conflationpro>here</a>.</td> </tr> <tr> <td><a id=snappycallback> </a><code>sinkCallback</code></td> <td>This is an optional property which is used to override default <strong>Snappy Sink</strong> behavior. To override the default behavior, client codes should implement <code>SnappySinkCallback</code> trait and pass the fully qualified name of the implementing class against this property value.</td> </tr> </tbody> </table> <p><a id=haninsertupdatesdeletes> </a></p> <h3 id=handling-inserts-updates-and-deletes>Handling Inserts, Updates and Deletes<a class=headerlink href=#handling-inserts-updates-and-deletes title="Permanent link">&para;</a></h3> <p>A common use case for streaming is capturing writes into another store (Operational database such as RDB or NoSQL DB) and streaming the events through Kafka, applying Spark transformations, and ingesting into an analytics datastore such as SnappyData. This pattern is commonly referred to as <strong>Change-Data-Capture (CDC)</strong>.</p> <p><a id=eventypecolumn> </a> To support this use case, <strong>Snappy Sink</strong> supports events to signal if these are Inserts, Updates, or Deletes. The application is required to inject a column called <code>_eventType</code> as described below.</p> <p>To support <strong>CDC</strong>, the source DataFrame must have the following:</p> <ul> <li> <p>An <code>IntegerType</code> column named <code>_eventType</code>. The value in the <code>_eventType</code> column can be any of the following:</p> <ul> <li><code>0</code> for insert events</li> <li><code>1</code> for update events</li> <li><code>2</code> for delete events</li> </ul> <p>In case the input data is following a different convention for event types, then it must be transformed to match the above-mentioned format.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Records which have <code>_eventType</code> value other than the above-mentioned ones are skipped.</p> </div> </li> <li> <p>The target SnappyData table must have key columns defined for a column table or primary key defined for a row table.</p> </li> </ul> <p>An example explaining the <strong>CDC</strong> use case is available <a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/structuredstreaming/CDCExample.scala>here</a>.</p> <p>If the <code>_eventType</code> column is not provided as part of source dataframe, then the following is observed:</p> <ul> <li>In a target table with key columns/primary key defined, the <strong>put into</strong> operation is applied to all events.</li> <li>In a target table without key columns/primary key defined, the <strong>insert</strong> operation is applied to all the events.</li> </ul> <p><a id=event_order> </a></p> <h3 id=event-processing-order>Event Processing Order<a class=headerlink href=#event-processing-order title="Permanent link">&para;</a></h3> <p>Currently, the ordering of events across partitions is not supported. Event processing occurs independently in each partition. Hence, you must ensure that in your application all the events, that are associated with a key, are always delivered on the same partition (shard on the key).</p> <p>If your incoming stream is not partitioned on the key column, the application should first repartition the dataframe on the key column. You can ignore this requirement, if your incoming streams are continuously appending. For example, time series or when replacing data where ordering is irrelevant.</p> <p><a id=abovementioned> </a> The writes occur by grouping the events in the following manner (for performance optimization of the columnar store) and is only applicable when your DataFrame has an <strong>_eventType</strong> column:</p> <ul> <li>Processes all delete events (deletes relevant records from target table)</li> <li>Processes all insert events (inserts relevant records into the target table</li> <li>Processes all update events (applies PutInto operation)</li> </ul> <p>If the <strong>_eventType</strong> column is not provided as part of source dataframe, then the events are processed in the following manner: * If key columns/primary keys are defined for the target table, then all the events are treated as update events and <strong>put into</strong> operation is performed for all events. * If key columns/primary keys are not defined for the target table, then all the events are treated as insert events and insert operation is applied for all events.</p> <p><a id=conflationpro> </a> If <code>conflation</code> property is set to <code>true</code>, <strong>Snappy Sink</strong> will first conflate the incoming batch independently by each partition. The conflation of events is performed in the following steps: * Group all the events in the given partition by key. * Convert inserts into <strong>put into</strong> operations if the event type of the last event for a key is of insert type and there are more than one events for the same key. * Keep the last event for each key and drop remaining events.</p> <p>This results in a batch, where there is at most a single entry per key.</p> <p>By default the <code>conflation</code> property is set to <code>false</code>. Therefore, the event processing semantics only ensures consistency when incoming events in a batch are for the unique key column(s).</p> <p><strong>For example:</strong>If an incoming batch contains an <strong>Insert(key1)</strong> event followed by a <strong>Delete(key1)</strong> event, the record for <strong>key1</strong> is shown in the target table after the batch is processed. This is because all the Delete events are processed before Insert events as per the event processing order explained <a href=#abovementioned>here</a>. In such cases, you should enable the Conflation by setting the <strong>conflation</strong> property to true. Now, if a batch contains <strong>Insert(key1)</strong> event followed by a Dele<strong>te(key1)</strong> event, then SnappyData Sink conflates these two events into a single event by selecting the last event which is <strong>Delete(key1)</strong> and only that event is processed for <strong>key1</strong>. Processing <strong>Delete(key1)</strong> event without processing <strong>Insert(key1)</strong> event does not result in a failure, as Delete events are ignored if corresponding records do not exist in the target table.</p> <p><a id=sinkstatetable> </a></p> <h3 id=sink-state-table>Sink State Table<a class=headerlink href=#sink-state-table title="Permanent link">&para;</a></h3> <p>A replicated row table with name <strong>snappysys_internal____sink_state_table</strong> is created by <strong>Snappy Sink</strong> under schema specified by the <strong>stateTableSchema</strong> option if the table does not exist. If the <strong>stateTableSchema</strong> is not specified then the sink state table is created under the <strong>APP</strong> schema. During the processing of each batch, this state is updated.</p> <p>This table is used by <strong>Snappy Sink</strong> to maintain the state of the streaming queries. This state is important to maintain the idempotency of the sink In case of stream failures. The <strong>Sink State</strong> table contains the following fields:</p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Comment</th> </tr> </thead> <tbody> <tr> <td>stream_query_id</td> <td>varchar(200)</td> <td>Primary Key. Name of the streaming query</td> </tr> <tr> <td>batch_id</td> <td>long</td> <td>Batch id of the most recent batch picked up for processing.</td> </tr> </tbody> </table> <h4 id=behavior-of-sink-state-table-in-a-secure-cluster>Behavior of Sink State Table in a Secure cluster<a class=headerlink href=#behavior-of-sink-state-table-in-a-secure-cluster title="Permanent link">&para;</a></h4> <p>When security is enabled for the cluster, the <strong>stateTableSchema</strong> becomes a mandatory option. Also, when you submit the streaming job, you must have the necessary permissions on the schema specified by <strong>stateTableSchema</strong> option.</p> <h4 id=maintaining-idempotency-in-case-of-stream-failures>Maintaining Idempotency In Case Of Stream Failures<a class=headerlink href=#maintaining-idempotency-in-case-of-stream-failures title="Permanent link">&para;</a></h4> <p>When stream execution fails, it is possible that streaming batch was half processed. Hence next time whenever the stream is started, Spark picks the half processed batch again for processing. This can lead to extraneous records in the target table if the batch contains insert events. To overcome this, Snappy Sink keeps the state of a stream query execution as part of the Sink State table.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The key columns in a column table are merely a hint (used to perform <strong>put into</strong> and <strong>delete</strong> operations) and does not enforce a unique constraint such as a primary key in case of a row table.</p> </div> <p>Using this state, Snappy Sink can detect whether a batch is a duplicate batch. If a batch is a duplicate batch then Snappy Sink processes all insert events from the batch using <strong>put into</strong> operation. This ensures that no duplicate records are inserted into the target table.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The above-mentioned behavior is applicable only when the key columns are defined on the target table as key columns are necessary to apply <strong>put into</strong> operation. When key columns are not defined on the target table, Snappy Sink does not behave in an idempotent manner and it can lead to duplicate records in the target table when the streaming query is restarted after stream failure.</p> </div> <p><a id=overridesinkbeha> </a></p> <h3 id=overriding-default-sink-behavior>Overriding Default Sink Behavior<a class=headerlink href=#overriding-default-sink-behavior title="Permanent link">&para;</a></h3> <p>If required, applications can override the default <strong>Snappy Sink</strong> semantics by implementing <strong>org.apache.spark.sql.streaming.SnappySinkCallback</strong> and passing the fully qualified name of the implementing class as a value of <strong>sinkCallback</strong> option of <strong>Snappy Sink</strong>.</p> <p><strong>SnappySinkCallback</strong> trait contains one method which needs to be implemented by the implementing class. This method is called for each streaming batch after checking the possibility of batch duplication which is indicated by <strong>possibleDuplicate</strong> flag.</p> <p>A duplicate batch might be picked up for processing in case of failure. In the case of batch duplication, this method should handle batch in an idempotent manner in order to avoid data inconsistency.</p> <p><div class=highlight><pre><span></span><code>def process(snappySession: SnappySession, sinkProps: Map[String, String],
      batchId: Long, df: Dataset[Row], possibleDuplicate: Boolean = false): Unit
</code></pre></div> <a id=resetstreamquery> </a></p> <h3 id=resetting-a-streaming-query>Resetting a Streaming Query<a class=headerlink href=#resetting-a-streaming-query title="Permanent link">&para;</a></h3> <p>Progress of a streaming query is saved as part of the checkpoint directory by Spark. On top of this <strong>Snappy Sink</strong> also maintains an internal state as part of the state table to ensure idempotency of the sink.</p> <p>Hence to reset a streaming query, the following actions must be taken to clean te state of the streaming query:</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When you use the following steps you may permanently lose the state of the streaming query.</p> </div> <ol> <li>Delete the checkpoint directory. (or start streaming query with different checkpoint directory.)</li> <li> <p>Clear the state from the state table using following sql:</p> <div class=highlight><pre><span></span><code>delete from [state_table_schema].snappysys_internal____sink_state_table where stream_query_id = &lt;query_name&gt;;
</code></pre></div> <ul> <li><code>[state_table_schema]</code> is the schema passed as part of <strong>stateTableSchema</strong> option of snappy sink. It should be skipped if <strong>stateTableSchema</strong> option was not provided while defining snappy sink.</li> <li><code>&lt;query_name&gt;</code> is the name of the query provided while defining the sink.</li> </ul> </li> </ol> <p><a id=bestpracticesstruc> </a></p> <h3 id=best-practices-for-structured-streaming>Best Practices for Structured Streaming<a class=headerlink href=#best-practices-for-structured-streaming title="Permanent link">&para;</a></h3> <p>Refer to the <a href=../../best_practices/structured_streaming_best_practices/ >Best Practices for Structured Streaming Considerations</a>.</p> <p><a id=limitationsstruc> </a></p> <h3 id=limitations>Limitations<a class=headerlink href=#limitations title="Permanent link">&para;</a></h3> <p>Limitations of <strong>Snappy Sink</strong> are as follows:</p> <ul> <li> <p>When the data coming from the source is not partitioned by key columns, then using <strong>Snappy Sink</strong> may result in inconsistent data. This is because each partition independently processes the data using the <a href=#event_order>above-mentioned logic</a>.</p> </li> <li> <p>When key columns are not defined on the target table and the input dataframe does not contain <code>_eventType</code> column, then <strong>Snappy Sink</strong> cannot guarantee idempotent behavior. This is because inserts cannot be converted into <strong>put into</strong>, as there are no key columns on the table. In such a scenario, <strong>Snappy Sink</strong> may insert duplicate records after an abrupt failure of the streaming job.</p> </li> <li> <p>The default <strong>Snappy Sink</strong> implementation does not support partial records for updates. Which means that there is no support to merge updates on a few columns into the store. For all update events, the incoming records must provide values into all the columns of the target table.</p> </li> </ul> <p><a id=dstreams> </a></p> <h2 id=spark-streaming-dstreams-model>Spark Streaming DStreams Model<a class=headerlink href=#spark-streaming-dstreams-model title="Permanent link">&para;</a></h2> <p>SnappyData’s streaming functionality builds on top of Spark Streaming and is primarily aimed at making it simpler to build streaming applications and to integrate with the built-in store. In SnappyData, you can define streams declaratively from any SQL client, register continuous queries on streams, mutate SnappyData tables based on the streaming data. For more information on streaming, refer to this <a href=../../programming_guide/stream_processing_using_sql/ >section</a>.</p> <h3 id=code-sample>Code Sample<a class=headerlink href=#code-sample title="Permanent link">&para;</a></h3> <p>Code example for streaming is in <a href=https://github.com/TIBCOSoftware/snappydata/blob/master/examples/src/main/scala/org/apache/spark/examples/snappydata/StreamingExample.scala>StreamingExample.scala</a>. The code snippets in the following sections show how to declare a stream table, register continuous queries(CQ), and update SnappyData table using the stream data.</p> <h3 id=using-stream-processing-with-snappydata>Using Stream Processing with SnappyData<a class=headerlink href=#using-stream-processing-with-snappydata title="Permanent link">&para;</a></h3> <p><strong>First get a SnappySession and a SnappyStreamingContext</strong>: Here SnappyStreamingContext is initialized in a batch duration of one second. <div class=highlight><pre><span></span><code>val spark: SparkSession = SparkSession
    .builder
    .appName(getClass.getSimpleName)
    .master(&quot;local[*]&quot;)
    .getOrCreate

val snsc = new SnappyStreamingContext(spark.sparkContext, Seconds(1))
</code></pre></div></p> <p>The example starts an embedded Kafka instance on which a few messages are published. SnappyData processes these message and updates a table based on the stream data.</p> <p>The SQL below shows how to declare a stream table using SQL. The rowConverter attribute specifies a class used to return Row objects from the received stream messages. <div class=highlight><pre><span></span><code> snsc.sql(
      &quot;create stream table adImpressionStream (&quot; +
        &quot; time_stamp timestamp,&quot; +
        &quot; publisher string,&quot; +
        &quot; advertiser string,&quot; +
        &quot; website string,&quot; +
        &quot; geo string,&quot; +
        &quot; bid double,&quot; +
        &quot; cookie string) &quot; + &quot; using kafka_stream options(&quot; +
        &quot; rowConverter &#39;org.apache.spark.examples.snappydata.RowsConverter&#39;,&quot; +
        s&quot; kafkaParams &#39;bootstrap.servers-&gt;$add;&quot; +
        &quot;key.deserializer-&gt;org.apache.kafka.common.serialization.StringDeserializer;&quot; +
        &quot;value.deserializer-&gt;org.apache.kafka.common.serialization.StringDeserializer;&quot; +
        s&quot;group.id-&gt;$groupId;auto.offset.reset-&gt;earliest&#39;,&quot; +
        s&quot; startingOffsets &#39;$startingOffsets&#39;, &quot; +
        s&quot; subscribe &#39;$topic&#39;)&quot;
    )
</code></pre></div></p> <p>RowsConverter decodes a stream message consisting of comma-separated fields and forms a Row object from it.</p> <div class=highlight><pre><span></span><code>class RowsConverter extends StreamToRowsConverter with Serializable {

  override def toRows(message: Any): Seq[Row] = {
    val log = message.asInstanceOf[String]
    val fields = log.split(&quot;,&quot;)
    val rows = Seq(Row.fromSeq(Seq(new java.sql.Timestamp(fields(0).toLong),
      fields(1),
      fields(2),
      fields(3),
      fields(4),
      fields(5).toDouble,
      fields(6)
    )))

    rows
  }
}
</code></pre></div> <p><strong>To create a row table that is updated based on the streaming data</strong>:</p> <div class=highlight><pre><span></span><code>snsc.sql(&quot;create table publisher_bid_counts(publisher string, bidCount int) using row&quot;)
</code></pre></div> <p><strong>To declare a continuous query that is executed on the streaming data</strong>: This query returns a number of bids per publisher in one batch.</p> <div class=highlight><pre><span></span><code>val resultStream: SchemaDStream = snsc.registerCQ(&quot;select publisher, count(bid) as bidCount from &quot; +
    &quot;adImpressionStream window (duration 1 seconds, slide 1 seconds) group by publisher&quot;)
</code></pre></div> <p><strong>To process that the result of above continuous query to update the row table publisher_bid_counts</strong>:</p> <div class=highlight><pre><span></span><code>// this conf is used to get a JDBC connection
val conf = new ConnectionConfBuilder(snsc.snappySession).build()

resultStream.foreachDataFrame(df =&gt; {
    println(&quot;Data received in streaming window&quot;)
    df.show()

    println(&quot;Updating table publisher_bid_counts&quot;)
    val conn = ConnectionUtil.getConnection(conf)
    val result = df.collect()
    val stmt = conn.prepareStatement(&quot;update publisher_bid_counts set &quot; +
        s&quot;bidCount = bidCount + ? where publisher = ?&quot;)

    result.foreach(row =&gt; {
      val publisher = row.getString(0)
      val bidCount = row.getLong(1)
      stmt.setLong(1, bidCount)
      stmt.setString(2, publisher)
      stmt.addBatch()
        }
        )
    stmt.executeBatch()
    conn.close()
  }
})
</code></pre></div> <p><strong>To display the total bids by each publisher by querying publisher_bid_counts table</strong>:</p> <div class=highlight><pre><span></span><code>snsc.snappySession.sql(&quot;select publisher, bidCount from publisher_bid_counts&quot;).show()
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../store_and_query_objects/ class="md-footer__link md-footer__link--prev" aria-label="Previous: How to Store and Query Objects" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> How to Store and Query Objects </div> </div> </a> <a href=../use_transactions_isolation_levels/ class="md-footer__link md-footer__link--next" aria-label="Next: How to use Transactions Isolation Levels" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> How to use Transactions Isolation Levels </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright © 2017-2021 TIBCO Software Inc. All rights reserved. </div> </div> <div class=md-social> </div> <div class=md-footer-generator> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.indexes", "navigation.top", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.01824240.min.js", "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.e0abf5b0.min.js></script> </body> </html>